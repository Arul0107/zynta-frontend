import{R as w,r as z,x as l,O as at,y as $e,B as he,S as lt,V as ze}from"./index-CzhUO-j-.js";import{i as De}from"./axios-By3bUnR1.js";import{D as ct,d as G}from"./index-mKLDrSdO.js";import{T as st}from"./index-C4h5jtsp.js";import{S as We}from"./index-C8yeWvpE.js";import{R as ut,C as ie}from"./row-OZxQAKlt.js";import{C as M}from"./index-DP1xEHC8.js";import{g as ft,i as D,G as dt,a as me,m as ht,b as L,T as mt,s as pe,f as H,c as Ie,L as Ne,d as pt,e as yt,u as je,h as ke,j as vt,k as gt,l as bt,w as Fe,n as Ve,o as ue,p as xt,q as wt,r as Ot,B as ve,t as jt,R as kt,v as Pt}from"./generateCategoricalChart-CUY4Pz6x.js";import{c as te}from"./clsx-B-dksMZM.js";import{F as St}from"./Table-DFMW3Ydh.js";import{M as _t}from"./index-13yZt8pQ.js";import{L as ne}from"./index-lr-WlZcr.js";import{T as W}from"./index-D5ZUECex.js";import"./TextArea-DXZam5Hb.js";import"./EditOutlined-BMpNAhkC.js";import"./styleChecker-B_q3kf9f.js";import"./index-CEh5PPkT.js";import"./PlusOutlined-DZ7SDzrR.js";import"./rgb-CRqGqeL1.js";import"./addEventListener-CEFnZ_sV.js";import"./index-B7S4UWYb.js";import"./Pagination-D_gJDmdp.js";import"./extendsObject-78o_rR5W.js";import"./ExclamationCircleFilled-DJFsQvbq.js";import"./InfoCircleFilled-BHF3Pce5.js";import"./ActionButton-LNqSuIr7.js";import"./index-DjwdYPep.js";import"./useClosable-dDnesZuT.js";import"./context-C3C_yqM-.js";function He(e,t,i){if(t<1)return[];if(t===1&&i===void 0)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function Tt(e,t,i){var r={width:e.width+t.width,height:e.height+t.height};return ft(r,i)}function Et(e,t,i){var r=i==="width",n=e.x,o=e.y,a=e.width,u=e.height;return t===1?{start:r?n:o,end:r?n+a:o+u}:{start:r?n+a:o+u,end:r?n:o}}function ae(e,t,i,r,n){if(e*t<e*r||e*t>e*n)return!1;var o=i();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-n)<=0}function Ct(e,t){return He(e,t+1)}function At(e,t,i,r,n){for(var o=(r||[]).slice(),a=t.start,u=t.end,s=0,h=1,c=a,y=function(){var g=r==null?void 0:r[s];if(g===void 0)return{v:He(r,h)};var b=s,m,k=function(){return m===void 0&&(m=i(g,b)),m},x=g.coordinate,v=s===0||ae(e,x,k,c,u);v||(s=0,c=a,h+=1),v&&(c=x+e*(k()/2+n),s+=h)},d;h<=o.length;)if(d=y(),d)return d.v;return[]}function re(e){"@babel/helpers - typeof";return re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(e)}function Re(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function _(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Re(Object(i),!0).forEach(function(r){$t(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Re(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function $t(e,t,i){return t=zt(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function zt(e){var t=Dt(e,"string");return re(t)=="symbol"?t:t+""}function Dt(e,t){if(re(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t);if(re(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function It(e,t,i,r,n){for(var o=(r||[]).slice(),a=o.length,u=t.start,s=t.end,h=function(d){var f=o[d],g,b=function(){return g===void 0&&(g=i(f,d)),g};if(d===a-1){var m=e*(f.coordinate+e*b()/2-s);o[d]=f=_(_({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate})}else o[d]=f=_(_({},f),{},{tickCoord:f.coordinate});var k=ae(e,f.tickCoord,b,u,s);k&&(s=f.tickCoord-e*(b()/2+n),o[d]=_(_({},f),{},{isShow:!0}))},c=a-1;c>=0;c--)h(c);return o}function Nt(e,t,i,r,n,o){var a=(r||[]).slice(),u=a.length,s=t.start,h=t.end;if(o){var c=r[u-1],y=i(c,u-1),d=e*(c.coordinate+e*y/2-h);a[u-1]=c=_(_({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate});var f=ae(e,c.tickCoord,function(){return y},s,h);f&&(h=c.tickCoord-e*(y/2+n),a[u-1]=_(_({},c),{},{isShow:!0}))}for(var g=o?u-1:u,b=function(x){var v=a[x],O,p=function(){return O===void 0&&(O=i(v,x)),O};if(x===0){var P=e*(v.coordinate-e*p()/2-s);a[x]=v=_(_({},v),{},{tickCoord:P<0?v.coordinate-P*e:v.coordinate})}else a[x]=v=_(_({},v),{},{tickCoord:v.coordinate});var C=ae(e,v.tickCoord,p,s,h);C&&(s=v.tickCoord+e*(p()/2+n),a[x]=_(_({},v),{},{isShow:!0}))},m=0;m<g;m++)b(m);return a}function Pe(e,t,i){var r=e.tick,n=e.ticks,o=e.viewBox,a=e.minTickGap,u=e.orientation,s=e.interval,h=e.tickFormatter,c=e.unit,y=e.angle;if(!n||!n.length||!r)return[];if(D(s)||dt.isSsr)return Ct(n,typeof s=="number"&&D(s)?s:0);var d=[],f=u==="top"||u==="bottom"?"width":"height",g=c&&f==="width"?me(c,{fontSize:t,letterSpacing:i}):{width:0,height:0},b=function(v,O){var p=L(h)?h(v.value,O):v.value;return f==="width"?Tt(me(p,{fontSize:t,letterSpacing:i}),g,y):me(p,{fontSize:t,letterSpacing:i})[f]},m=n.length>=2?ht(n[1].coordinate-n[0].coordinate):1,k=Et(o,m,f);return s==="equidistantPreserveStart"?At(m,k,b,n,a):(s==="preserveStart"||s==="preserveStartEnd"?d=Nt(m,k,b,n,a,s==="preserveStartEnd"):d=It(m,k,b,n,a),d.filter(function(x){return x.isShow}))}var Ft=["viewBox"],Rt=["viewBox"],Lt=["ticks"];function K(e){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(e)}function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Y.apply(this,arguments)}function Le(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function E(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Le(Object(i),!0).forEach(function(r){Se(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Le(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function ye(e,t){if(e==null)return{};var i=Bt(e,t),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Bt(e,t){if(e==null)return{};var i={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;i[r]=e[r]}return i}function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ke(r.key),r)}}function Mt(e,t,i){return t&&Be(e.prototype,t),i&&Be(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wt(e,t,i){return t=le(t),Vt(e,Ye()?Reflect.construct(t,i||[],le(e).constructor):t.apply(e,i))}function Vt(e,t){if(t&&(K(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ht(e)}function Ht(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ye=function(){return!!e})()}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},le(e)}function Yt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ge(e,t)}function ge(e,t){return ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},ge(e,t)}function Se(e,t,i){return t=Ke(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ke(e){var t=Kt(e,"string");return K(t)=="symbol"?t:t+""}function Kt(e,t){if(K(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t);if(K(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var q=function(e){function t(i){var r;return Gt(this,t),r=Wt(this,t,[i]),r.state={fontSize:"",letterSpacing:""},r}return Yt(t,e),Mt(t,[{key:"shouldComponentUpdate",value:function(r,n){var o=r.viewBox,a=ye(r,Ft),u=this.props,s=u.viewBox,h=ye(u,Rt);return!pe(o,s)||!pe(a,h)||!pe(n,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var n=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];n&&this.setState({fontSize:window.getComputedStyle(n).fontSize,letterSpacing:window.getComputedStyle(n).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var n=this.props,o=n.x,a=n.y,u=n.width,s=n.height,h=n.orientation,c=n.tickSize,y=n.mirror,d=n.tickMargin,f,g,b,m,k,x,v=y?-1:1,O=r.tickSize||c,p=D(r.tickCoord)?r.tickCoord:r.coordinate;switch(h){case"top":f=g=r.coordinate,m=a+ +!y*s,b=m-v*O,x=b-v*d,k=p;break;case"left":b=m=r.coordinate,g=o+ +!y*u,f=g-v*O,k=f-v*d,x=p;break;case"right":b=m=r.coordinate,g=o+ +y*u,f=g+v*O,k=f+v*d,x=p;break;default:f=g=r.coordinate,m=a+ +y*s,b=m+v*O,x=b+v*d,k=p;break}return{line:{x1:f,y1:b,x2:g,y2:m},tick:{x:k,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,n=r.orientation,o=r.mirror,a;switch(n){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,n=r.orientation,o=r.mirror,a="end";switch(n){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,n=r.x,o=r.y,a=r.width,u=r.height,s=r.orientation,h=r.mirror,c=r.axisLine,y=E(E(E({},H(this.props,!1)),H(c,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!h||s==="bottom"&&h);y=E(E({},y),{},{x1:n,y1:o+d*u,x2:n+a,y2:o+d*u})}else{var f=+(s==="left"&&!h||s==="right"&&h);y=E(E({},y),{},{x1:n+f*a,y1:o,x2:n+f*a,y2:o+u})}return w.createElement("line",Y({},y,{className:te("recharts-cartesian-axis-line",Ie(c,"className"))}))}},{key:"renderTicks",value:function(r,n,o){var a=this,u=this.props,s=u.tickLine,h=u.stroke,c=u.tick,y=u.tickFormatter,d=u.unit,f=Pe(E(E({},this.props),{},{ticks:r}),n,o),g=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),m=H(this.props,!1),k=H(c,!1),x=E(E({},m),{},{fill:"none"},H(s,!1)),v=f.map(function(O,p){var P=a.getTickLineCoord(O),C=P.line,N=P.tick,A=E(E(E(E({textAnchor:g,verticalAnchor:b},m),{},{stroke:"none",fill:h},k),N),{},{index:p,payload:O,visibleTicksCount:f.length,tickFormatter:y});return w.createElement(Ne,Y({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},pt(a.props,O,p)),s&&w.createElement("line",Y({},x,C,{className:te("recharts-cartesian-axis-tick-line",Ie(s,"className"))})),c&&t.renderTickItem(c,A,"".concat(L(y)?y(O.value,p):O.value).concat(d||"")))});return w.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var r=this,n=this.props,o=n.axisLine,a=n.width,u=n.height,s=n.ticksGenerator,h=n.className,c=n.hide;if(c)return null;var y=this.props,d=y.ticks,f=ye(y,Lt),g=d;return L(s)&&(g=d&&d.length>0?s(this.props):s(f)),a<=0||u<=0||!g||!g.length?null:w.createElement(Ne,{className:te("recharts-cartesian-axis",h),ref:function(m){r.layerReference=m}},o&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),yt.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,n,o){var a;return w.isValidElement(r)?a=w.cloneElement(r,n):L(r)?a=r(n):a=w.createElement(mt,Y({},n,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(z.Component);Se(q,"displayName","CartesianAxis");Se(q,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Xt=["x1","y1","x2","y2","key"],Ut=["offset"];function B(e){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(e)}function Ge(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function T(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Ge(Object(i),!0).forEach(function(r){qt(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ge(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function qt(e,t,i){return t=Jt(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Jt(e){var t=Qt(e,"string");return B(t)=="symbol"?t:t+""}function Qt(e,t){if(B(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t);if(B(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},R.apply(this,arguments)}function Me(e,t){if(e==null)return{};var i=Zt(e,t),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Zt(e,t){if(e==null)return{};var i={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;i[r]=e[r]}return i}var er=function(t){var i=t.fill;if(!i||i==="none")return null;var r=t.fillOpacity,n=t.x,o=t.y,a=t.width,u=t.height,s=t.ry;return w.createElement("rect",{x:n,y:o,ry:s,width:a,height:u,stroke:"none",fill:i,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Xe(e,t){var i;if(w.isValidElement(e))i=w.cloneElement(e,t);else if(L(e))i=e(t);else{var r=t.x1,n=t.y1,o=t.x2,a=t.y2,u=t.key,s=Me(t,Xt),h=H(s,!1);h.offset;var c=Me(h,Ut);i=w.createElement("line",R({},c,{x1:r,y1:n,x2:o,y2:a,fill:"none",key:u}))}return i}function tr(e){var t=e.x,i=e.width,r=e.horizontal,n=r===void 0?!0:r,o=e.horizontalPoints;if(!n||!o||!o.length)return null;var a=o.map(function(u,s){var h=T(T({},e),{},{x1:t,y1:u,x2:t+i,y2:u,key:"line-".concat(s),index:s});return Xe(n,h)});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function rr(e){var t=e.y,i=e.height,r=e.vertical,n=r===void 0?!0:r,o=e.verticalPoints;if(!n||!o||!o.length)return null;var a=o.map(function(u,s){var h=T(T({},e),{},{x1:u,y1:t,x2:u,y2:t+i,key:"line-".concat(s),index:s});return Xe(n,h)});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function ir(e){var t=e.horizontalFill,i=e.fillOpacity,r=e.x,n=e.y,o=e.width,a=e.height,u=e.horizontalPoints,s=e.horizontal,h=s===void 0?!0:s;if(!h||!t||!t.length)return null;var c=u.map(function(d){return Math.round(d+n-n)}).sort(function(d,f){return d-f});n!==c[0]&&c.unshift(0);var y=c.map(function(d,f){var g=!c[f+1],b=g?n+a-d:c[f+1]-d;if(b<=0)return null;var m=f%t.length;return w.createElement("rect",{key:"react-".concat(f),y:d,x:r,height:b,width:o,stroke:"none",fill:t[m],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},y)}function nr(e){var t=e.vertical,i=t===void 0?!0:t,r=e.verticalFill,n=e.fillOpacity,o=e.x,a=e.y,u=e.width,s=e.height,h=e.verticalPoints;if(!i||!r||!r.length)return null;var c=h.map(function(d){return Math.round(d+o-o)}).sort(function(d,f){return d-f});o!==c[0]&&c.unshift(0);var y=c.map(function(d,f){var g=!c[f+1],b=g?o+u-d:c[f+1]-d;if(b<=0)return null;var m=f%r.length;return w.createElement("rect",{key:"react-".concat(f),x:d,y:a,width:b,height:s,stroke:"none",fill:r[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},y)}var or=function(t,i){var r=t.xAxis,n=t.width,o=t.height,a=t.offset;return Ve(Pe(T(T(T({},q.defaultProps),r),{},{ticks:ue(r,!0),viewBox:{x:0,y:0,width:n,height:o}})),a.left,a.left+a.width,i)},ar=function(t,i){var r=t.yAxis,n=t.width,o=t.height,a=t.offset;return Ve(Pe(T(T(T({},q.defaultProps),r),{},{ticks:ue(r,!0),viewBox:{x:0,y:0,width:n,height:o}})),a.top,a.top+a.height,i)},V={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ue(e){var t,i,r,n,o,a,u=je(),s=ke(),h=vt(),c=T(T({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:V.stroke,fill:(i=e.fill)!==null&&i!==void 0?i:V.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:V.horizontal,horizontalFill:(n=e.horizontalFill)!==null&&n!==void 0?n:V.horizontalFill,vertical:(o=e.vertical)!==null&&o!==void 0?o:V.vertical,verticalFill:(a=e.verticalFill)!==null&&a!==void 0?a:V.verticalFill,x:D(e.x)?e.x:h.left,y:D(e.y)?e.y:h.top,width:D(e.width)?e.width:h.width,height:D(e.height)?e.height:h.height}),y=c.x,d=c.y,f=c.width,g=c.height,b=c.syncWithTicks,m=c.horizontalValues,k=c.verticalValues,x=gt(),v=bt();if(!D(f)||f<=0||!D(g)||g<=0||!D(y)||y!==+y||!D(d)||d!==+d)return null;var O=c.verticalCoordinatesGenerator||or,p=c.horizontalCoordinatesGenerator||ar,P=c.horizontalPoints,C=c.verticalPoints;if((!P||!P.length)&&L(p)){var N=m&&m.length,A=p({yAxis:v?T(T({},v),{},{ticks:N?m:v.ticks}):void 0,width:u,height:s,offset:h},N?!0:b);Fe(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(B(A),"]")),Array.isArray(A)&&(P=A)}if((!C||!C.length)&&L(O)){var F=k&&k.length,$=O({xAxis:x?T(T({},x),{},{ticks:F?k:x.ticks}):void 0,width:u,height:s,offset:h},F?!0:b);Fe(Array.isArray($),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(B($),"]")),Array.isArray($)&&(C=$)}return w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(er,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),w.createElement(tr,R({},c,{offset:h,horizontalPoints:P,xAxis:x,yAxis:v})),w.createElement(rr,R({},c,{offset:h,verticalPoints:C,xAxis:x,yAxis:v})),w.createElement(ir,R({},c,{horizontalPoints:P})),w.createElement(nr,R({},c,{verticalPoints:C})))}Ue.displayName="CartesianGrid";function X(e){"@babel/helpers - typeof";return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(e)}function lr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cr(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qe(r.key),r)}}function sr(e,t,i){return t&&cr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ur(e,t,i){return t=ce(t),fr(e,qe()?Reflect.construct(t,i||[],ce(e).constructor):t.apply(e,i))}function fr(e,t){if(t&&(X(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dr(e)}function dr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qe=function(){return!!e})()}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},ce(e)}function hr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}function be(e,t){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},be(e,t)}function Je(e,t,i){return t=Qe(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Qe(e){var t=mr(e,"string");return X(t)=="symbol"?t:t+""}function mr(e,t){if(X(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t);if(X(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},xe.apply(this,arguments)}function pr(e){var t=e.xAxisId,i=je(),r=ke(),n=xt(t);return n==null?null:w.createElement(q,xe({},n,{className:te("recharts-".concat(n.axisType," ").concat(n.axisType),n.className),viewBox:{x:0,y:0,width:i,height:r},ticksGenerator:function(a){return ue(a,!0)}}))}var fe=function(e){function t(){return lr(this,t),ur(this,t,arguments)}return hr(t,e),sr(t,[{key:"render",value:function(){return w.createElement(pr,this.props)}}])}(w.Component);Je(fe,"displayName","XAxis");Je(fe,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function U(e){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(e)}function yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vr(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tt(r.key),r)}}function gr(e,t,i){return t&&vr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function br(e,t,i){return t=se(t),xr(e,Ze()?Reflect.construct(t,i||[],se(e).constructor):t.apply(e,i))}function xr(e,t){if(t&&(U(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wr(e)}function wr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ze=function(){return!!e})()}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},se(e)}function Or(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&we(e,t)}function we(e,t){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},we(e,t)}function et(e,t,i){return t=tt(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function tt(e){var t=jr(e,"string");return U(t)=="symbol"?t:t+""}function jr(e,t){if(U(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t);if(U(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Oe.apply(this,arguments)}var kr=function(t){var i=t.yAxisId,r=je(),n=ke(),o=wt(i);return o==null?null:w.createElement(q,Oe({},o,{className:te("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(u){return ue(u,!0)}}))},de=function(e){function t(){return yr(this,t),br(this,t,arguments)}return Or(t,e),gr(t,[{key:"render",value:function(){return w.createElement(kr,this.props)}}])}(w.Component);et(de,"displayName","YAxis");et(de,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var Pr=Ot({chartName:"BarChart",GraphicalChild:ve,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:fe},{axisType:"yAxis",AxisComp:de}],formatAxisMap:jt});const{Title:Z,Text:ee}=st,{Option:oe}=We,{RangePicker:Sr}=ct;function ii(){const[e,t]=z.useState([]),[i,r]=z.useState([]),[n,o]=z.useState(!1),[a,u]=z.useState("today"),[s,h]=z.useState([]),[c,y]=z.useState({total:0,completed:0,pending:0,working:0}),[d,f]=z.useState([]),[g,b]=z.useState(!1),[m,k]=z.useState(null),x=async()=>{var p,P;o(!0);try{const C=await De.get("/api/users"),N=Array.isArray(C.data)?C.data:[];t(N);let A,F;const $=G();if(a==="today")A=$.startOf("day").toISOString(),F=$.endOf("day").toISOString();else if(a==="week")A=$.startOf("week").toISOString(),F=$.endOf("week").toISOString();else if(a==="month")A=$.startOf("month").toISOString(),F=$.endOf("month").toISOString();else if(a==="custom"&&s.length===2)A=s[0].startOf("day").toISOString(),F=s[1].endOf("day").toISOString();else{ze.error("Please select a valid date range"),o(!1);return}const _e=((P=(p=(await De.get(`/api/work-sessions/range?start=${A}&end=${F}`)).data)==null?void 0:p.history)==null?void 0:P.flatMap(j=>j.sessions))||[],J=N.map(j=>{var Te,Ee;const I=_e.filter(S=>String(S.userId)===String(j._id));return I.length===0?{key:j._id,name:j.name,email:j.email||"-",team:((Te=j.team)==null?void 0:Te.name)||"-",department:((Ee=j.department)==null?void 0:Ee.name)||"-",date:"-",loginTimeFormatted:"-",logoutTimeFormatted:"-",workedHours:"0h",eod:"",status:"No Session",accountIds:[],serviceIds:[]}:I.map(S=>{var Ce,Ae;return{key:S._id,name:j.name,email:j.email||"-",team:((Ce=j.team)==null?void 0:Ce.name)||"-",department:((Ae=j.department)==null?void 0:Ae.name)||"-",date:S.loginTime?G(S.loginTime).format("YYYY-MM-DD"):"-",loginTimeFormatted:S.loginTime?G(S.loginTime).format("hh:mm A"):"-",logoutTimeFormatted:S.logoutTime?G(S.logoutTime).format("hh:mm A"):"-",workedHours:S.totalHours?`${Math.floor(S.totalHours)}h ${Math.floor(S.totalHours*60%60)}m`:"0h",eod:S.eod||"",status:S.logoutTime?S.eod?"Completed":"EOD Pending":"Working",accountIds:S.accountIds||[],serviceIds:S.serviceIds||[]}})}).flat();r(J);const rt=J.length,it=J.filter(j=>j.status==="Completed").length,nt=J.filter(j=>j.status==="Working").length,ot=J.filter(j=>j.status==="EOD Pending").length;y({total:rt,completed:it,pending:ot,working:nt});const Q={};_e.forEach(j=>{const I=G(j.loginTime).format("YYYY-MM-DD");Q[I]||(Q[I]={date:I,completed:0,pending:0}),j.eod&&j.logoutTime?Q[I].completed++:Q[I].pending++}),f(Object.values(Q).sort((j,I)=>new Date(j.date)-new Date(I.date)))}catch(C){console.error(C),ze.error("Failed to load EOD report")}finally{o(!1)}};z.useEffect(()=>{a!=="custom"&&x()},[a]);const v=p=>{k(p),b(!0)},O=[{title:"Date",dataIndex:"date",key:"date"},{title:"Employee",dataIndex:"name",key:"name",render:p=>l.jsx("strong",{children:p})},{title:"Email",dataIndex:"email",key:"email"},{title:"Login Time",dataIndex:"loginTimeFormatted"},{title:"Logout Time",dataIndex:"logoutTimeFormatted"},{title:"Worked Hours",dataIndex:"workedHours"},{title:"EOD Message",dataIndex:"eod",render:p=>p?l.jsx("span",{style:{whiteSpace:"pre-wrap"},children:p}):l.jsx(W,{color:"red",children:"Pending"})},{title:"Status",dataIndex:"status",render:p=>{switch(p){case"Working":return l.jsx(W,{color:"blue",children:"Working"});case"Completed":return l.jsx(W,{color:"green",children:"Completed"});case"EOD Pending":return l.jsx(W,{color:"orange",children:"EOD Pending"});case"No Session":return l.jsx(W,{color:"grey",children:"No Session"});default:return l.jsx(W,{color:"grey",children:"Unknown"})}}},{title:"Actions",key:"actions",render:(p,P)=>P.status!=="No Session"?l.jsx(he,{type:"link",onClick:()=>v(P),children:"View EOD"}):null}];return l.jsxs("div",{style:{padding:24},children:[l.jsx(at,{position:"top-right"}),l.jsxs($e,{align:"center",style:{width:"100%",justifyContent:"space-between",marginBottom:24,flexWrap:"wrap"},children:[l.jsx(Z,{level:2,children:"Employee EOD Report"}),l.jsxs($e,{wrap:!0,children:[l.jsxs(We,{value:a,onChange:u,style:{width:160},children:[l.jsx(oe,{value:"today",children:"Today"}),l.jsx(oe,{value:"week",children:"This Week"}),l.jsx(oe,{value:"month",children:"This Month"}),l.jsx(oe,{value:"custom",children:"Custom Range"})]}),a==="custom"&&l.jsx(Sr,{onChange:p=>h(p||[])}),l.jsx(he,{type:"primary",onClick:x,loading:n,disabled:a==="custom"&&s.length!==2,children:"Fetch Data"})]})]}),l.jsxs(ut,{gutter:[16,16],children:[l.jsx(ie,{xs:24,sm:12,md:6,children:l.jsxs(M,{children:[l.jsx(Z,{level:4,children:"Total Records"}),l.jsx(ee,{strong:!0,children:c.total})]})}),l.jsx(ie,{xs:24,sm:12,md:6,children:l.jsxs(M,{children:[l.jsx(Z,{level:4,style:{color:"green"},children:"Completed EOD"}),l.jsx(ee,{strong:!0,children:c.completed})]})}),l.jsx(ie,{xs:24,sm:12,md:6,children:l.jsxs(M,{children:[l.jsx(Z,{level:4,style:{color:"orange"},children:"EOD Pending"}),l.jsx(ee,{strong:!0,children:c.pending})]})}),l.jsx(ie,{xs:24,sm:12,md:6,children:l.jsxs(M,{children:[l.jsx(Z,{level:4,style:{color:"blue"},children:"Currently Working"}),l.jsx(ee,{strong:!0,children:c.working})]})})]}),l.jsx(M,{style:{marginTop:24},title:"EOD Completion Trend",children:n?l.jsx("div",{style:{textAlign:"center",padding:50},children:l.jsx(lt,{size:"large"})}):d.length>0?l.jsx(kt,{width:"100%",height:300,children:l.jsxs(Pr,{data:d,children:[l.jsx(Ue,{strokeDasharray:"3 3"}),l.jsx(fe,{dataKey:"date",tickFormatter:p=>G(p).format("DD MMM")}),l.jsx(de,{allowDecimals:!1}),l.jsx(Pt,{}),l.jsx(ve,{dataKey:"completed",fill:"#4CAF50",name:"Completed"}),l.jsx(ve,{dataKey:"pending",fill:"#FF9800",name:"Pending"})]})}):l.jsx(ee,{type:"secondary",children:"No data available for this period"})}),l.jsx(M,{style:{marginTop:24},children:l.jsx(St,{columns:O,dataSource:i,loading:n,pagination:{pageSize:10},bordered:!0,scroll:{x:1300}})}),l.jsx(_t,{title:`EOD Details - ${m==null?void 0:m.name}`,visible:g,onCancel:()=>b(!1),footer:l.jsx(he,{onClick:()=>b(!1),children:"Close"}),width:700,children:m&&l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Date:"})," ",m.date]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Login:"})," ",m.loginTimeFormatted]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Logout:"})," ",m.logoutTimeFormatted]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Worked Hours:"})," ",m.workedHours]}),l.jsx("p",{children:l.jsx("strong",{children:"EOD Message:"})}),l.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"#f5f5f5",padding:10},children:m.eod||"No EOD provided"}),l.jsx("p",{children:l.jsx("strong",{children:"Accounts:"})}),l.jsx(ne,{size:"small",bordered:!0,dataSource:m.accountIds||[],renderItem:p=>l.jsxs(ne.Item,{children:[p.businessName," - ",p.contactName]})}),l.jsx("p",{children:l.jsx("strong",{children:"Services:"})}),l.jsx(ne,{size:"small",bordered:!0,dataSource:m.serviceIds||[],renderItem:p=>l.jsxs(ne.Item,{children:[p.serviceName," (",p.category,")"]})})]})})]})}export{ii as default};
