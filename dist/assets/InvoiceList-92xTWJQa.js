import{q as e,s as q,V,B as Q,F as Me,D as ue,E as Ve}from"./index-Db3Ct3vh.js";import{F as Y,r as p,D as ye,K as ve,c as ee,B as v,T as ce,s as ke,O as g,S as he,l as z,o as de,d as me,b as F,M as ie,P as _e,z as le,v as K,L as re,C as He,h as Ge,q as Xe,e as Pe,g as De,V as qe,Z as Ke,U as X,x as Je,y as We,a as Qe}from"./antd-CjRtIVzR.js";import{d as Ze,T as et,S as tt,u as st,m as nt,U as at}from"./icons-De3RWgvB.js";import{h as se}from"./moment-C5S46NFB.js";import{E as ot,h as rt}from"./html2canvas.esm-DBTO1nPv.js";const{TextArea:lt}=ee,dt=({visible:o,onClose:T,account:s,invoice:h,refreshInvoices:y,refreshAccounts:f})=>{const[C]=Y.useForm(),[x,P]=p.useState([]),[$,a]=p.useState(!1);p.useEffect(()=>{var A;const u=((A=h||s)==null?void 0:A.notes)||[];P(Array.isArray(u)?u:[])},[h,s]);const w=()=>{try{const u=JSON.parse(localStorage.getItem("user"));return(u==null?void 0:u.name)||(u==null?void 0:u.email)||"Unknown"}catch{return"Unknown"}},i=()=>h?`/api/invoices/${h._id}`:`/api/accounts/${s._id}`,D=async({note:u})=>{if(!u)return;const A={text:u,timestamp:new Date().toISOString(),addedBy:w()},b=[...x,A];try{a(!0),await q.put(i(),{...h||s,notes:b}),ke.success("Note added"),P(b),C.resetFields(),h?y==null||y():f==null||f()}catch(E){console.error("Failed to add note:",E),ke.error("Failed to add note")}finally{a(!1)}},M=(u=>{const A={};return u.forEach(b=>{if(!b||typeof b!="object")return;const E=b.timestamp?new Date(b.timestamp).toLocaleDateString():"Unknown Date";A[E]||(A[E]=[]),A[E].push(b)}),A})(x);return e.jsx(ye,{title:e.jsxs("div",{children:["Notes for ",h?"Invoice":"Account"," ",e.jsxs(ce.Text,{code:!0,children:["#",(h==null?void 0:h.invoiceNumber)||(s==null?void 0:s.businessName)]})]}),open:o,onClose:T,width:450,destroyOnClose:!0,children:e.jsxs(ve,{spinning:$,children:[e.jsx("div",{style:{padding:"0 8px"},children:Object.entries(M).map(([u,A])=>e.jsxs("div",{children:[e.jsx("div",{className:"note-date-header",children:u}),A.map((b,E)=>e.jsxs("div",{className:"note-bubble",children:[e.jsxs("div",{className:"note-meta",children:[b.addedBy||"Unknown"," • ",b.timestamp?new Date(b.timestamp).toLocaleTimeString():""]}),e.jsx("div",{className:"note-text",children:typeof b.text=="string"?b.text:JSON.stringify(b.text)})]},E))]},u))}),e.jsxs(Y,{form:C,layout:"vertical",onFinish:D,style:{marginTop:16},children:[e.jsx(Y.Item,{name:"note",rules:[{required:!0,message:"Enter note"}],children:e.jsx(lt,{rows:3,placeholder:"Type your note here..."})}),e.jsx(v,{htmlType:"submit",type:"primary",style:{backgroundColor:"#0E2B43",borderColor:"#orange",color:"white"},icon:e.jsx(Ze,{}),block:!0,children:"Add Note"})]})]})})},{Text:xe}=ce,it=({visible:o,onClose:T,invoice:s,refreshInvoices:h})=>{var O;const[y]=Y.useForm(),[f]=Y.useForm(),[C,x]=p.useState(!1),[P,$]=p.useState({paymentHistory:[]}),[a,w]=p.useState(!1),[i,D]=p.useState(null),[L,M]=p.useState(0),[u,A]=p.useState(0),[b,E]=p.useState(!1),U=c=>{const m=c.paymentHistory.reduce((j,R)=>j+R.amount,0);if(M(m),s!=null&&s.totalAmount){const j=s.totalAmount-m;A(j),E(j<=.01)}else A(0),E(!1)},G=()=>{try{const c=JSON.parse(localStorage.getItem("user"));return(c==null?void 0:c.email)||"Unknown"}catch{return"Unknown"}},d=async()=>{if(s!=null&&s._id)try{const c=await q.get(`/api/invoices/${s._id}`),m={...c.data,paymentHistory:Array.isArray(c.data.paymentHistory)?c.data.paymentHistory:[]};$(m),U(m)}catch(c){V.error("Failed to fetch invoice details."),console.error("Error fetching invoice:",c),$({paymentHistory:[]}),U({paymentHistory:[]})}};p.useEffect(()=>{o&&d()},[o,s==null?void 0:s._id]),p.useEffect(()=>{U(P)},[s==null?void 0:s.totalAmount,P.paymentHistory]);const H=async c=>{const m=parseFloat(c.amount);if(isNaN(m)||m<=0){V.error("Please enter a valid positive amount!");return}const j=P.paymentHistory.reduce((J,pe)=>J+pe.amount,0),R=(s==null?void 0:s.totalAmount)||0;if(j+m>R+.01){V.error(`Payment amount exceeds outstanding balance. Outstanding: ₹${(R-j).toFixed(2)}`);return}x(!0);try{const J={...c,date:c.date.format("DD-MM-YYYY"),addedBy:G()};await q.post(`/api/invoices/${s._id}/payments`,J),V.success("Payment added successfully!"),y.resetFields(),await d(),h()}catch(J){V.error("Failed to add payment."),console.error("Error adding payment:",J)}finally{x(!1)}},l=async c=>{try{await q.delete(`/api/invoices/${s._id}/payments/${c}`),V.success("Payment deleted successfully!"),await d(),h()}catch(m){V.error("Failed to delete payment."),console.error("Error deleting payment:",m)}},S=async c=>{try{const m={...c,date:c.date.format("DD-MM-YYYY")};await q.put(`/api/invoices/${s._id}/payments/${i}`,m),V.success("Payment updated successfully!"),w(!1),await d(),h()}catch(m){V.error("Failed to update payment."),console.error("Error updating payment:",m)}},B=[{title:"Amount",dataIndex:"amount",key:"amount",render:c=>`₹${Number(c).toFixed(2)}`},{title:"Method",dataIndex:"method",key:"method"},{title:"Reference",dataIndex:"reference",key:"reference"},{title:"Date",dataIndex:"date",key:"date",render:c=>me(c).format("DD/MM/YYYY")},{title:"Added By",dataIndex:"addedBy",key:"addedBy"},{title:"Actions",key:"actions",render:(c,m)=>e.jsxs(he,{size:"middle",children:[e.jsx(v,{type:"link",onClick:()=>{D(m._id),f.setFieldsValue({amount:m.amount,method:m.method,reference:m.reference,date:me(m.date)}),w(!0)},children:"Edit"}),e.jsx(_e,{title:"Are you sure to delete this payment?",onConfirm:()=>l(m._id),okText:"Yes",cancelText:"No",children:e.jsx(v,{type:"link",danger:!0,children:"Delete"})})]})}];return e.jsxs(ye,{title:`Payment History for Invoice #${(s==null?void 0:s.invoiceNumber)||(s==null?void 0:s.proformaNumber)||"N/A"}`,placement:"right",onClose:T,open:o,width:720,children:[e.jsxs(g,{bordered:!0,column:1,size:"small",style:{marginBottom:20},children:[e.jsx(g.Item,{label:"Invoice Total",children:e.jsxs(xe,{strong:!0,children:["₹",((O=s==null?void 0:s.totalAmount)==null?void 0:O.toFixed(2))||"0.00"]})}),e.jsx(g.Item,{label:"Total Paid",children:e.jsxs(xe,{strong:!0,style:{color:L>0?"green":"inherit"},children:["₹",L.toFixed(2)]})}),e.jsx(g.Item,{label:"Outstanding Balance",children:e.jsxs(xe,{strong:!0,style:{color:u>0?"red":"green"},children:["₹",u.toFixed(2)]})})]}),!b&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Add New Payment"}),e.jsx(Y,{form:y,layout:"vertical",onFinish:H,style:{marginBottom:20},children:e.jsxs(he,{children:[e.jsx(Y.Item,{name:"amount",label:"Amount",rules:[{required:!0,message:"Please input amount!"}],children:e.jsx(ee,{type:"number",step:"0.01"})}),e.jsx(Y.Item,{name:"method",label:"Method",rules:[{required:!0,message:"Please select method!"}],children:e.jsxs(z,{style:{width:120},children:[e.jsx(z.Option,{value:"Cash",children:"Cash"}),e.jsx(z.Option,{value:"UPI",children:"UPI"}),e.jsx(z.Option,{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx(z.Option,{value:"Card",children:"Card"})]})}),e.jsx(Y.Item,{name:"reference",label:"Reference",children:e.jsx(ee,{})}),e.jsx(Y.Item,{name:"date",label:"Date",rules:[{required:!0,message:"Please select date!"}],children:e.jsx(de,{style:{width:"100%"},defaultValue:me(),format:"DD/MM/YYYY"})}),e.jsx(v,{type:"primary",style:{backgroundColor:"#0E2B43",borderColor:"#orange",color:"white"},htmlType:"submit",loading:C,children:"Add Payment"})]})})]}),e.jsx("h3",{children:"Payment History"}),e.jsx(F,{dataSource:P.paymentHistory,columns:B,rowKey:"_id",pagination:!1,scroll:{x:"max-content"}}),e.jsx(ie,{open:a,title:"Edit Payment Entry",onCancel:()=>w(!1),onOk:()=>f.submit(),okText:"Update",cancelText:"Cancel",children:e.jsxs(Y,{layout:"vertical",form:f,onFinish:S,children:[e.jsx(Y.Item,{name:"amount",label:"Amount",rules:[{required:!0}],children:e.jsx(ee,{type:"number"})}),e.jsx(Y.Item,{name:"method",label:"Method",rules:[{required:!0}],children:e.jsxs(z,{children:[e.jsx(z.Option,{value:"Cash",children:"Cash"}),e.jsx(z.Option,{value:"UPI",children:"UPI"}),e.jsx(z.Option,{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx(z.Option,{value:"Card",children:"Card"})]})}),e.jsx(Y.Item,{name:"reference",label:"Reference",rules:[{required:!0}],children:e.jsx(ee,{})}),e.jsx(Y.Item,{name:"date",label:"Date",rules:[{required:!0}],children:e.jsx(de,{style:{width:"100%"},format:"DD/MM/YYYY"})})]})})]})},{TextArea:ct}=ee,{TabPane:ge}=K,{Text:Ee}=ce,pt=({visible:o,onClose:T,invoice:s,refreshInvoices:h})=>{const[y,f]=p.useState(""),[C,x]=p.useState(null),[P,$]=p.useState(!1),[a,w]=p.useState([]),[i,D]=p.useState(null);p.useEffect(()=>{o&&(s!=null&&s._id)&&L()},[o,s]);const L=async()=>{try{const l=await q.get(`/api/invoices/${s._id}/followups`);w(l.data||[])}catch(l){console.error("Failed to fetch follow-ups:",l),Q.error("Failed to fetch follow-ups")}},M=()=>{if(!y||!C){Q.error("Please fill in both date and note fields.");return}const l=JSON.parse(localStorage.getItem("user")),S=l==null?void 0:l._id;if(!S){Q.error("User information not found. Please log in.");return}$(!0);const B={date:C.format("DD-MM-YYYY"),note:y,addedBy:S};(i===null?q.post(`/api/invoices/${s._id}/followups`,B):q.put(`/api/invoices/${s._id}/followups/${i}`,B)).then(()=>{Q.success(i===null?"Follow-up added successfully!":"Follow-up updated successfully!"),f(""),x(null),D(null),L(),h()}).catch(c=>{var m,j;console.error("Error saving follow-up:",c),Q.error(((j=(m=c==null?void 0:c.response)==null?void 0:m.data)==null?void 0:j.message)||"Failed to save follow-up.")}).finally(()=>$(!1))},u=l=>{const S=a[l];f(S.note),x(se(S.date)),D(l)},A=l=>{ie.confirm({title:"Delete Follow-up",content:"Are you sure you want to delete this follow-up? This action cannot be undone.",okText:"Yes, Delete",cancelText:"No",okButtonProps:{danger:!0},onOk:()=>{q.delete(`/api/invoices/${s._id}/followups/${l}`).then(()=>{Q.success("Follow-up deleted successfully!"),L(),h()}).catch(S=>{var B,O;console.error("Error deleting follow-up:",S),Q.error(((O=(B=S==null?void 0:S.response)==null?void 0:B.data)==null?void 0:O.message)||"Failed to delete follow-up.")})}})},b=se().format("DD-MM-YYYY"),E=[...a].sort((l,S)=>new Date(S.date)-new Date(l.date)),U=E.filter(l=>se(l.date).format("DD-MM-YYYY")===b),G=E.filter(l=>se(l.date).isAfter(b,"day")),d=E.filter(l=>se(l.date).isBefore(b,"day")),H=(l,S)=>{var B,O;return e.jsx(re.Item,{actions:[e.jsx(v,{type:"link",onClick:()=>u(S),children:"Edit"},"edit"),e.jsx(v,{type:"link",danger:!0,onClick:()=>A(S),children:"Delete"},"delete")],children:e.jsxs("div",{children:[e.jsx(Ee,{strong:!0,children:se(l.date).format("DD-MM-YYYY")}),e.jsx("br",{}),l.note,e.jsx("br",{}),e.jsxs(Ee,{type:"secondary",children:["By ",((B=l.addedBy)==null?void 0:B.name)||((O=l.addedBy)==null?void 0:O.email)||"Unknown User"]})]})})};return e.jsxs(ye,{title:`Follow-ups for Invoice: ${(s==null?void 0:s.invoiceNumber)||(s==null?void 0:s.proformaNumber)||"N/A"}`,open:o,onClose:()=>{D(null),f(""),x(null),T()},width:720,children:[e.jsxs("div",{style:{marginBottom:20},children:[e.jsx(de,{style:{width:"100%",marginBottom:8},format:"DD-MM-YYYY",value:C,onChange:l=>x(l),placeholder:"Select follow-up date"}),e.jsx(ct,{rows:4,placeholder:"Enter follow-up note",value:y,onChange:l=>f(l.target.value)}),e.jsx(v,{type:"primary",style:{marginTop:10,backgroundColor:"#0E2B43",borderColor:"#orange",color:"white"},block:!0,onClick:M,loading:P,children:i===null?"Add Follow-up":"Update Follow-up"})]}),e.jsx(le,{children:"Existing Follow-ups"}),e.jsxs(K,{defaultActiveKey:"today",children:[e.jsx(ge,{tab:`Today's (${U.length})`,children:e.jsx(re,{dataSource:U,renderItem:l=>H(l,a.indexOf(l)),locale:{emptyText:"No follow-ups scheduled for today."}})},"today"),e.jsx(ge,{tab:`Upcoming (${G.length})`,children:e.jsx(re,{dataSource:G,renderItem:l=>H(l,a.indexOf(l)),locale:{emptyText:"No upcoming follow-ups."}})},"upcoming"),e.jsx(ge,{tab:`Past (${d.length})`,children:e.jsx(re,{dataSource:d,renderItem:l=>H(l,a.indexOf(l)),locale:{emptyText:"No past follow-ups."}})},"past")]})]})},Be="/assets/vrism-C_g_ufdn.png",Z=o=>isNaN(o)?"0.00":o.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),ut=o=>{if(typeof o!="number"||isNaN(o))return"N/A";let T=Math.floor(o),s=Math.round((o-T)*100);const h=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],y=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],f=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],C=["","Thousand","Lakh","Crore"],x=i=>i<10?h[i]:i>=10&&i<20?y[i-10]:f[Math.floor(i/10)]+(i%10!==0?" "+h[i%10]:"");let P=[],$=0;if(T===0)P.push("Zero");else{let i=T%1e3;for(i>0&&(i<100?P.push(x(i)):P.push(h[Math.floor(i/100)]+" Hundred"+(i%100!==0?" "+x(i%100):""))),T=Math.floor(T/1e3);T>0;){let D=T%100;D>0?P.push(x(D)+" "+C[++$]):$++,T=Math.floor(T/100)}}const a=P.reverse().filter(Boolean).join(" ").trim();let w=a?a+" Rupees":"Zero Rupees";return s>0&&(w+=` and ${x(s)} Paisa`),w+=" Only",w.replace(/\s+/g," ")},mt=o=>{var M,u,A,b,E,U,G;const T=((M=o.businessId)==null?void 0:M.contactName)||o.contactName||"N/A",s=o.mobileNumber||((u=o.businessId)==null?void 0:u.mobileNumber)||((A=o.businessId)==null?void 0:A.phone)||"N/A",h=((b=o.businessId)==null?void 0:b.email)||o.email||"N/A",y=((E=o.businessId)==null?void 0:E.gstNumber)||o.gstin||"N/A",f=o.businessId?`${o.businessId.addressLine1||""}, ${o.businessId.addressLine2||""}, ${o.businessId.addressLine3||""}, ${o.businessId.city||""} - ${o.businessId.pincode||""}, ${o.businessId.state||""}, ${o.businessId.country||""}`:o.customerAddress||"N/A",C=parseFloat(o.subTotal)||0,x=parseFloat(o.igstAmount)||0,P=parseFloat(o.cgstAmount)||0,$=parseFloat(o.sgstAmount)||0,a=parseFloat(o.totalAmount)||0,w=Be,i=Be,D=()=>{if(o.gstType==="interstate")return`
                <tr>
                    <td style="width: 70%;"></td>
                    <td style="border: 1px solid #e0e0e0; padding: 10px; text-align: right; width: 15%; background: #f0f2f5;">IGST (${o.gstPercentage||0}%)</td>
                    <td style="border: 1px solid #e0e0e0; padding: 10px; text-align: right; width: 15%;">₹${Z(x)}</td>
                </tr>
            `;if(o.gstType==="intrastate"){const d=(o.gstPercentage||0)/2;return`
                <tr>
                    <td style="width: 70%;"></td>
                    <td style="border: 1px solid #e0e0e0; padding: 10px; text-align: right; width: 15%; background: #f0f2f5;">CGST (${d}%)</td>
                    <td style="border: 1px solid #e0e0e0; padding: 10px; text-align: right; width: 15%;">₹${Z(P)}</td>
                </tr>
                <tr>
                    <td style="width: 70%;"></td>
                    <td style="border: 1px solid #e0e0e0; padding: 10px; text-align: right; width: 15%; background: #f0f2f5;">SGST (${d}%)</td>
                    <td style="border: 1px solid #e0e0e0; padding: 10px; text-align: right; width: 15%;">₹${Z($)}</td>
                </tr>
            `}return""},L=o.notes&&Array.isArray(o.notes)&&o.notes.length>0?o.notes.map(d=>`<p style="margin: 2px 0;">${d.text}</p>`).join(""):'<p style="margin: 2px 0;">Thank you for your business!</p>';return`
    <div style="padding: 10px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; width: 100%; box-sizing: border-box;">
        <div style="margin-bottom: 15px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <div style="display: flex; align-items: center;">
                    <img src="${w}" alt="Company Logo" style="height: 60px; margin-right: 10px;">
                    <div>
                        <h2 style="margin: 0; font-size: 18px; font-weight: 600; color: #2c3e50; margin-bottom: 3px;">ACE AUTOMATION</h2>
                        <p style="margin: 1px 0; font-size: 9px; color: #555;">S.F. No. 91, 14B, Padiveedu Thottam,</p>
                        <p style="margin: 1px 0; font-size: 9px; color: #555;">Kalapatty road, Saravanampatti (PO),</p>
                        <p style="margin: 1px 0; font-size: 9px; color: #555;">Coimbatore - 641 035. TN, INDIA.</p>
                        <p style="margin: 1px 0; font-size: 9px; color: #555;">+91 98422 53389 | aceautomation.cbe@gmail.com</p>
                        <p style="margin: 1px 0; font-size: 9px; color: #555;">www.aceautomation.in | GST No. : 33AVDPD3093Q1ZD</p>
                    </div>
                </div>

                <div style="background: linear-gradient(135deg, #4CAF50, #8BC34A); color: white; padding: 10px 20px; font-weight: 600; font-size: 18px; text-align: center; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    TAX INVOICE
                </div>
            </div>
            <div style="border-bottom: 1px solid #eee; margin-bottom: 10px;"></div>
        </div>

        <div style="margin-bottom: 20px; background: #f9fafb; border-radius: 4px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
            <table style="width: 100%; border-collapse: collapse; font-size: 11px;">
                <tr>
                    <td style="border: 1px solid #e0e0e0; padding: 6px; font-weight: 600; width: 25%; background: #f0f2f5;">Bill To</td>
                    <td style="border: 1px solid #e0e0e0; padding: 6px; width: 25%;">
                        ${((U=o.businessId)==null?void 0:U.businessName)||o.customerName||"N/A"}
                    </td>
                    <td style="border: 1px solid #e0e0e0; padding: 6px; font-weight: 600; width: 25%; background: #f0f2f5;">Invoice No</td>
                    <td style="border: 1px solid #e0e0e0; padding: 6px; width: 25%;">
                        ${o.invoiceNumber||"N/A"}
                    </td>
                </tr>
                <tr>
                    <td style="border: 1px solid #e0e0e0; padding: 6px; font-weight: 600; background: #f0f2f5;">Contact Person</td>
                    <td style="border: 1px solid #e0e0e0; padding: 6px;">
                        ${T}
                    </td>
                    <td style="border: 1px solid #e0e0e0; padding: 6px; font-weight: 600; background: #f0f2f5;">Date</td>
                    <td style="border: 1px solid #e0e0e0; padding: 6px;">
                        ${o.date||new Date().toLocaleDateString("en-IN")}
                    </td>
                </tr>
                <tr>
                    <td style="border: 1px solid #e0e0e0; padding: 6px; font-weight: 600; background: #f0f2f5;">Mobile</td>
                    <td style="border: 1px solid #e0e0e0; padding: 6px;">
                        ${s}
                    </td>
                    <td style="border: 1px solid #e0e0e0; padding: 6px; font-weight: 600; background: #f0f2f5;">Due Date</td>
                    <td style="border: 1px solid #e0e0e0; padding: 6px;">
                        ${o.dueDate||"N/A"}
                    </td>
                </tr>
                <tr>
                    <td style="border: 1px solid #e0e0e0; padding: 6px; font-weight: 600; background: #f0f2f5;">Email</td>
                    <td style="border: 1px solid #e0e0e0; padding: 6px;" colspan="3">
                        ${h}
                    </td>
                </tr>
                <tr>
                    <td style="border: 1px solid #e0e0e0; padding: 6px; font-weight: 600; background: #f0f2f5;">GSTIN</td>
                    <td style="border: 1px solid #e0e0e0; padding: 6px;" colspan="3">
                        ${y}
                    </td>
                </tr>
                <tr>
                    <td style="border: 1px solid #e0e0e0; padding: 6px; font-weight: 600; background: #f0f2f5;">Address</td>
                    <td style="border: 1px solid #e0e0e0; padding: 6px;" colspan="3">
                        ${f}
                    </td>
                </tr>
            </table>
        </div>

        ${((G=o.items)==null?void 0:G.length)>0?`
                <div style="margin-top: 20px; overflow: hidden; border-radius: 4px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                    <table style="width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed; font-size: 11px;">
                        <colgroup>
                            <col style="width: 5%;"> <col style="width: 20%;"> <col style="width: 25%;"> <col style="width: 10%;"> <col style="width: 8%;"> <col style="width: 12%;"> <col style="width: 10%;"> <col style="width: 10%;"> </colgroup>
                        <thead>
                            <tr style="background: linear-gradient(135deg, #2c3e50, #34495e); color: white;">
                                <th style="border: 1px solid #2c3e50; padding: 8px; text-align: center;">S.No</th>
                                <th style="border: 1px solid #2c3e50; padding: 8px; text-align: left;">Product Name</th>
                                <th style="border: 1px solid #2c3e50; padding: 8px; text-align: left;">Specification</th>
                                <th style="1px solid #2c3e50; padding: 8px; text-align: center;">Qty</th>
                                <th style="border: 1px solid #2c3e50; padding: 8px; text-align: center;">Unit</th>
                                <th style="border: 1px solid #2c3e50; padding: 8px; text-align: center;">HSN/SAC</th>
                                <th style="border: 1px solid #2c3e50; padding: 8px; text-align: right;">Unit Price (₹)</th>
                                <th style="border: 1px solid #2c3e50; padding: 8px; text-align: right;">Total (₹)</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${o.items.map((d,H)=>{var m;let l=(d==null?void 0:d.productName)||(d==null?void 0:d.description)||"";if(!l&&((m=d.specifications)==null?void 0:m.length)>0){const j=d.specifications.find(R=>R.name==="Model");j?l=j.value:d.specifications.length>0&&(l=d.specifications.map(R=>`${R.name}: ${R.value}`).join(", "))}l=l||"N/A";const S=d!=null&&d.specifications&&d.specifications.length>0?d.specifications.map(j=>`${j.name}: ${j.value}`).join(", "):"N/A",B=parseFloat(d.quantity)||0,O=parseFloat(d.rate)||0,c=(B*O).toFixed(2);return`
                                    <tr style="${H%2===0?"background: #fff;":"background: #f9fafb;"}">
                                        <td style="border: 1px solid #e0e0e0; padding: 8px; text-align: center; vertical-align: top;">${H+1}</td>
                                        <td style="border: 1px solid #e0e0e0; padding: 8px; text-align: left; vertical-align: top;">${l}</td>
                                        <td style="border: 1px solid #e0e0e0; padding: 8px; text-align: left; vertical-align: top;">${S}</td>
                                        <td style="border: 1px solid #e0e0e0; padding: 8px; text-align: center; vertical-align: top;">${B}</td>
                                        <td style="border: 1px solid #e0e0e0; padding: 8px; text-align: center; vertical-align: top;">${d.quantityType||"N/A"}</td>
                                        <td style="border: 1px solid #e0e0e0; padding: 8px; text-align: center; vertical-align: top;">${d.hsnSac||"N/A"}</td>
                                        <td style="border: 1px solid #e0e0e0; padding: 8px; text-align: right; vertical-align: top;">₹${Z(O)}</td>
                                        <td style="border: 1px solid #e0e0e0; padding: 8px; text-align: right; font-weight: 600; vertical-align: top;">₹${Z(parseFloat(c))}</td>
                                    </tr>
                                `}).join("")}
                        </tbody>
                    </table>
                </div>

                <div style="margin-top: 15px; background: #f9fafb; border-radius: 4px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                    <table style="width: 100%; border-collapse: collapse; font-size: 11px;">
                        <tr>
                            <td style="width: 70%;"></td>
                            <td style="border: 1px solid #e0e0e0; padding: 8px; text-align: right; font-weight: 600; width: 15%; background: #f0f2f5;">Sub Total</td>
                            <td style="border: 1px solid #e0e0e0; padding: 8px; text-align: right; font-weight: 600; width: 15%;">₹${Z(C)}</td>
                        </tr>
                        ${D()}
                        <tr style="background: #e8f5e9;">
                            <td style="width: 70%;"></td>
                            <td style="border: 1px solid #e0e0e0; padding: 8px; text-align: right; font-weight: 600; font-size: 12px; width: 15%;">Grand Total</td>
                            <td style="border: 1px solid #e0e0e0; padding: 8px; text-align: right; font-weight: 600; font-size: 12px; width: 15%;">₹${Z(a)}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin-top: 10px; background: #f5f5f5; border: 1px solid #e0e0e0; border-radius: 4px; padding: 10px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                    <table style="width: 100%; border-collapse: collapse; font-size: 11px;">
                        <tr>
                            <td style="font-weight: 600; padding: 3px; width: 25%; color: #555;">Amount In Words</td>
                            <td style="padding: 3px; font-style: italic; width: 75%;">${ut(a)}</td>
                        </tr>
                    </table>
                </div>
            `:""}

        <div style="margin-top: 15px; font-size: 11px; color: #555;">
            <p style="margin: 4px 0; font-weight: 600; color: #2c3e50;">Payment Terms:</p>
            <p style="margin: 1px 0;">${o.paymentTerms||"Payment due within 15 days of invoice date."}</p>

            <p style="margin: 8px 0; font-weight: 600; color: #2c3e50;">Notes:</p>
            <div style="margin-left: 5px;">
                ${L}
            </div>

            <p style="margin: 8px 0; font-weight: 600; color: #2c3e50;">Bank Details:</p>
            <p style="margin: 1px 0;">Bank Name: Your Bank Name</p>
            <p style="margin: 1px 0;">Account Number: XXXXXXXXXXXX</p>
            <p style="margin: 1px 0;">IFSC Code: XXXXXXXXXX</p>
            <p style="1px 0;">Branch: Your Branch Name</p>
        </div>

        <div style="margin-top: 25px; border-top: 1px solid #eee; padding-top: 15px;">
            <div style="text-align: right;">
                <img src="${i}" alt="Authorized Signature" style="height: 50px; display: block; margin-left: auto; margin-bottom: 3px;">
                <p style="margin: 4px 0; font-size: 11px; font-weight: 600; color: #2c3e50;">Authorized Signatory</p>
            </div>
            <p style="text-align: center; font-size: 9px; color: #999; margin-top: 15px;">
                This is Computer Generated Invoice & requires no Signature
            </p>
        </div>
    </div>
    `},xt=async o=>{if(!o)return;const T=V.loading("Generating Invoice PDF...",{position:"top-center"});let s=null;try{const h=mt(o),y=new ot({orientation:"portrait",unit:"mm",format:"a4",hotfixes:["px_scaling"]});y.setProperties({title:`Invoice - ${o.invoiceNumber}`,subject:"Invoice",author:o.companyName||"ACE AUTOMATION",keywords:"invoice, billing",creator:"Invoice Management System"});const f=y.internal.pageSize.getWidth(),C=y.internal.pageSize.getHeight(),x=5;s=document.createElement("div"),s.style.position="fixed",s.style.top="-9999px",s.style.left="-9999px",s.style.width=`${f-2*x}mm`,s.style.background="white",s.style.zIndex="-1",s.style.display="block",s.innerHTML=h,document.body.appendChild(s),await new Promise(M=>setTimeout(M,200));const $=(await rt(s,{scale:2,useCORS:!0,logging:!1,allowTaint:!0,letterRendering:!0,backgroundColor:"#ffffff"})).toDataURL("image/jpeg",.8),a=y.getImageProperties($),w=a.height*(f-2*x)/a.width;let i=x,D=C-2*x;if(w>D){let M=w,u=0;for(y.addImage($,"JPEG",x,i,f-2*x,w),M-=D,u-=D;M>0;)y.addPage(),y.addImage($,"JPEG",x,u+i,f-2*x,w),M-=D,u-=D}else y.addImage($,"JPEG",x,i,f-2*x,w);const L=y.output("blob");Me.saveAs(L,`invoice-${o.invoiceNumber||"draft"}.pdf`),V.success("Invoice PDF downloaded successfully!",{id:T})}catch(h){console.error("Error generating PDF:",h),V.error("Failed to generate PDF. Please try again.",{id:T})}finally{s&&document.body.contains(s)&&document.body.removeChild(s)}},{Text:N}=ce,{RangePicker:gt}=de,ht=({invoices:o,onAddNew:T,onEdit:s,onDelete:h,onSearch:y,refreshInvoices:f})=>{var we,je,Ie,Ne,Se,Te,Ce,Ae;const[C,x]=p.useState(""),[P,$]=p.useState(!1),[a,w]=p.useState(null),[i,D]=p.useState("all"),[L,M]=p.useState(!1),[u,A]=p.useState(!1),[b,E]=p.useState(!1),[U,G]=p.useState(null),[d,H]=p.useState("all"),[l,S]=p.useState(!1),[B,O]=p.useState({}),c=[...new Set(o.map(t=>t.businessName))],m=p.useCallback(t=>{var I;const n=parseFloat(t.totalAmount)||0,r=((I=t.paymentHistory)==null?void 0:I.reduce((_,k)=>_+parseFloat(k.amount||0),0))||0;return n<=0?"N/A":r>=n-.01?"paid":r>0&&r<n?"partial":"pending"},[]);p.useEffect(()=>{const t={};o.forEach(n=>{t[n._id]=m(n)}),O(t)},[o,m]),p.useEffect(()=>{a&&console.log(`Selected Invoice ${a.invoiceNumber} isClosed: ${a.isClosed}`)},[a]);const j=p.useCallback(t=>isNaN(t)?"0.00":t.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),[]),R=t=>{x(t),y(t)},J=t=>{w(t),$(!0)},pe=t=>{w(t),M(!0)},Ye=t=>{w(t),E(!0)},Oe=t=>{w(t),S(!0)},Le=t=>{w(t),A(!0)},Ue=()=>{const t=fe.map((k,W)=>({SNo:W+1,Number:k.invoiceNumber,Business:k.businessName,Customer:k.customerName,ContactName:k.contactName||"N/A",Email:k.email||"N/A",MobileNumber:k.mobileNumber||"N/A",TotalAmount:k.totalAmount||0,Date:k.date,DueDate:k.dueDate||"",Status:B[k._id]||k.paymentStatus})),n=ue.json_to_sheet(t),r=ue.book_new();ue.book_append_sheet(r,n,"Invoices");const I=Ve(r,{bookType:"xlsx",type:"array"}),_=new Blob([I],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Me.saveAs(_,`Invoices-${new Date().toISOString().split("T")[0]}.xlsx`)},fe=o.filter(t=>{var te,ae,oe,ne,Fe,$e;const n=t.invoiceType==="Invoice",r=!C||((te=t.invoiceNumber)==null?void 0:te.toLowerCase().includes(C.toLowerCase()))||((ae=t.businessName)==null?void 0:ae.toLowerCase().includes(C.toLowerCase()))||((oe=t.customerName)==null?void 0:oe.toLowerCase().includes(C.toLowerCase()))||((ne=t.contactName)==null?void 0:ne.toLowerCase().includes(C.toLowerCase()))||((Fe=t.email)==null?void 0:Fe.toLowerCase().includes(C.toLowerCase()))||(($e=t.mobileNumber)==null?void 0:$e.toLowerCase().includes(C.toLowerCase())),I=!U||new Date(t.date)>=U[0].toDate()&&new Date(t.date)<=U[1].toDate(),_=B[t._id],k=i==="all"?!0:i==="overdue"?_!=="paid"&&new Date(t.dueDate)<new Date:_===i,W=d==="all"?!0:t.businessName===d;return n&&r&&I&&k&&W}),be=t=>{let n="red",r="Payment Pending";return t==="paid"?(n="green",r="Completed Payment"):t==="partial"&&(n="orange",r="Partial Payment"),e.jsx(Pe,{color:n,children:r})},ze=()=>[{title:"S.No",width:60,align:"center",render:(t,n,r)=>r+1},{title:"Product Name",dataIndex:"productName",ellipsis:!0,render:(t,n)=>{var I;let r=t||n.description||"";if(!r&&((I=n.specifications)==null?void 0:I.length)>0){const _=n.specifications.find(k=>k.name==="Model");_&&(r=_.value)}return r||"N/A"}},{title:"Description",dataIndex:"description",ellipsis:!0,render:(t,n)=>{var r;if(!t&&((r=n.specifications)==null?void 0:r.length)>0){const I=n.specifications.find(_=>_.name==="SPECIFICATION");return I?I.value:"N/A"}return t||"N/A"}},{title:"HSN/SAC",dataIndex:"hsnSac",width:100,align:"center",render:t=>t||"N/A"},{title:"Qty",dataIndex:"quantity",width:80,align:"center",render:t=>parseFloat(t)||0},{title:"Unit Price (₹)",width:140,align:"right",render:(t,n)=>j(n.rate||0)},{title:"Total (₹)",width:140,align:"right",render:(t,n)=>e.jsx(N,{strong:!0,style:{color:"#52c41a"},children:j((n.quantity||0)*(n.rate||0))})}],Re=[{title:"S.No",render:(t,n,r)=>e.jsx(N,{strong:!0,children:r+1}),width:60},{title:"Invoice Number",render:(t,n)=>e.jsx(Pe,{icon:e.jsx(De,{}),color:"blue",children:n.invoiceNumber})},{title:"Business",render:(t,n)=>{var I;const r=((I=n.businessId)==null?void 0:I.businessName)||n.businessName;return e.jsx(qe,{title:r,children:e.jsx(N,{strong:!0,children:r})})}},{title:"Contact Person",dataIndex:"contactName",render:(t,n)=>{var r;return((r=n.businessId)==null?void 0:r.contactName)||t||"N/A"}},{title:"Email",dataIndex:"email",render:(t,n)=>{var r;return((r=n.businessId)==null?void 0:r.email)||t||"N/A"}},{title:"Mobile",dataIndex:"mobileNumber",render:(t,n)=>{var r,I;return((r=n.businessId)==null?void 0:r.mobileNumber)||((I=n.businessId)==null?void 0:I.phoneNumber)||t||"N/A"}},{title:"Amount",dataIndex:"totalAmount",align:"right",render:t=>e.jsxs(N,{style:{color:"#52c41a"},children:["₹",t||0]})},{title:"Due Date",dataIndex:"dueDate",align:"center",render:t=>e.jsx(N,{children:t||"N/A"})},{title:"Payment Status",key:"paymentStatusLabel",align:"center",render:(t,n)=>{const r=B[n._id]||"pending";return be(r)}},{title:"Actions",width:80,render:(t,n)=>e.jsx(Ke,{overlay:e.jsxs(X,{children:[e.jsx(X.Item,{icon:e.jsx(Je,{}),onClick:()=>J(n),children:"View Invoice Details"},"view"),e.jsx(X.Item,{icon:e.jsx(De,{}),onClick:()=>Oe(n),children:"View Item Specifications"},"view-specs"),e.jsx(X.Item,{icon:e.jsx(tt,{}),onClick:()=>xt(n),children:"Generate PDF"},"generate-pdf"),e.jsx(X.Item,{icon:e.jsx(st,{}),onClick:()=>pe(n),children:"View Notes"},"view-notes"),e.jsx(X.Item,{icon:e.jsx(nt,{}),onClick:()=>Le(n),children:"Add/View Follow-ups"},"add-followup"),e.jsx(X.Item,{icon:e.jsx(at,{}),onClick:()=>Ye(n),children:"View Payments"},"view-payments"),!n.isClosed&&e.jsx(X.Item,{icon:e.jsx(We,{}),onClick:()=>s(n),children:"Edit Invoice"},"edit"),e.jsx(X.Item,{icon:e.jsx(Qe,{}),disabled:n.isClosed,children:e.jsx(_e,{title:n.isClosed?"This invoice is locked and cannot be deleted.":"Are you sure you want to delete this invoice? This action cannot be undone.",onConfirm:()=>h(n._id),okText:"Yes, Delete",cancelText:"No",disabled:n.isClosed,children:"Delete Invoice"})},"delete")]}),trigger:["click"],children:e.jsx(v,{icon:e.jsx(et,{})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(He,{title:"Invoice Management",extra:e.jsxs(he,{wrap:!0,children:[e.jsx(gt,{onChange:G,format:"DD-MM-YYYY"}),e.jsxs(z,{value:d,onChange:H,placeholder:"Filter by Business",style:{width:200},allowClear:!0,children:[e.jsx(z.Option,{value:"all",children:"All Businesses"}),c.map(t=>e.jsx(z.Option,{value:t,children:t},t))]}),e.jsx(ee.Search,{placeholder:"Search invoices",onSearch:R,onChange:t=>R(t.target.value),style:{width:240},allowClear:!0,prefix:e.jsx(Ge,{})}),e.jsx(v,{onClick:Ue,children:"Export Excel"}),e.jsx(v,{type:"primary",icon:e.jsx(Xe,{}),onClick:T,style:{backgroundColor:"#0E2B43",borderColor:"#orange",color:"white"},children:"New Invoice"})]}),children:[e.jsxs(K,{activeKey:i,onChange:D,type:"card",size:"small",children:[e.jsx(K.TabPane,{tab:"All"},"all"),e.jsx(K.TabPane,{tab:"Partial"},"partial"),e.jsx(K.TabPane,{tab:"Pending"},"pending"),e.jsx(K.TabPane,{tab:"Paid"},"paid"),e.jsx(K.TabPane,{tab:"Overdue"},"overdue")," "]}),e.jsx(F,{dataSource:fe,columns:Re,rowKey:"_id",pagination:{pageSize:10},bordered:!0,scroll:{x:!0}})]}),e.jsx(ie,{title:"Invoice Details",open:P,onCancel:()=>$(!1),footer:e.jsx(v,{onClick:()=>$(!1),children:"Close"}),width:1e3,children:a&&e.jsxs("div",{children:[e.jsxs(g,{bordered:!0,column:2,size:"small",children:[e.jsx(g.Item,{label:"Invoice No",children:a.invoiceNumber}),e.jsx(g.Item,{label:"Date",children:a.date?new Date(a.date).toLocaleDateString("en-IN"):"N/A"}),e.jsx(g.Item,{label:"Due Date",children:a.dueDate?new Date(a.dueDate).toLocaleDateString("en-IN"):"N/A"}),e.jsx(g.Item,{label:"Business",children:a.businessName}),e.jsx(g.Item,{label:"Customer",children:a.contactName||a.customerName||"N/A"}),e.jsx(g.Item,{label:"Contact Person",children:a.contactName||"N/A"}),e.jsx(g.Item,{label:"Email",children:a.email||"N/A"}),e.jsx(g.Item,{label:"Mobile Number",children:a.mobileNumber||"N/A"}),e.jsx(g.Item,{label:"GSTIN",span:2,children:e.jsx(N,{code:!0,children:((we=a.businessId)==null?void 0:we.gstNumber)||a.gstin||"N/A"})}),e.jsx(g.Item,{label:"Business Info",span:2,children:e.jsx(N,{style:{whiteSpace:"pre-wrap"},children:a.businessId?`${a.businessId.addressLine1||""}
${a.businessId.addressLine2||""}
${a.businessId.addressLine3||""}
${a.businessId.city||""} - ${a.businessId.pincode||""}
${a.businessId.state||""}, ${a.businessId.country||""}`.trim():a.customerAddress||"N/A"})})]}),((je=a.items)==null?void 0:je.length)>0&&e.jsxs(e.Fragment,{children:[e.jsxs(le,{orientation:"left",children:["Items (",a.items.length,")"]}),e.jsx(F,{dataSource:a.items,columns:ze(),pagination:!1,size:"small",rowKey:(t,n)=>`${a._id}-item-${n}`,bordered:!0,expandable:{expandedRowRender:t=>{var n;return e.jsx("div",{style:{margin:0,padding:0},children:((n=t.specifications)==null?void 0:n.length)>0&&e.jsx(g,{column:1,size:"small",children:t.specifications.filter(r=>r.name!=="SPECIFICATION").map((r,I)=>e.jsx(g.Item,{label:r.name,children:r.value},I))})})},rowExpandable:t=>{var n;return((n=t.specifications)==null?void 0:n.length)>0}},summary:t=>{const n=t.reduce((oe,ne)=>oe+(ne.quantity||0)*(ne.rate||0),0),r=a.gstPercentage||0,I=a.gstType||"intrastate";let _=0,k=0,W=0,te=0;I==="interstate"?(te=n*(r/100),_=te):(k=n*(r/200),W=n*(r/200),_=k+W);const ae=n+_;return e.jsxs(F.Summary,{fixed:!0,children:[e.jsxs(F.Summary.Row,{children:[e.jsx(F.Summary.Cell,{index:0,colSpan:7,align:"right",children:e.jsx(N,{strong:!0,children:"Sub Total:"})}),e.jsx(F.Summary.Cell,{index:7,children:e.jsx(N,{strong:!0,children:j(n)})})]}),I==="interstate"?e.jsxs(F.Summary.Row,{children:[e.jsx(F.Summary.Cell,{index:0,colSpan:7,align:"right",children:e.jsxs(N,{strong:!0,children:["IGST (",r,"%):"]})}),e.jsx(F.Summary.Cell,{index:7,children:e.jsx(N,{strong:!0,children:j(te)})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(F.Summary.Row,{children:[e.jsx(F.Summary.Cell,{index:0,colSpan:7,align:"right",children:e.jsxs(N,{strong:!0,children:["CGST (",r/2,"%):"]})}),e.jsx(F.Summary.Cell,{index:5,children:e.jsx(N,{strong:!0,children:j(k)})})]}),e.jsxs(F.Summary.Row,{children:[e.jsx(F.Summary.Cell,{index:0,colSpan:5,align:"right",children:e.jsxs(N,{strong:!0,children:["SGST (",r/2,"%):"]})}),e.jsx(F.Summary.Cell,{index:5,children:e.jsx(N,{strong:!0,children:j(W)})})]})]}),e.jsxs(F.Summary.Row,{children:[e.jsx(F.Summary.Cell,{index:0,colSpan:7,align:"right",children:e.jsx(N,{strong:!0,children:"Grand Total:"})}),e.jsx(F.Summary.Cell,{index:5,children:e.jsx(N,{strong:!0,style:{color:"#52c41a"},children:j(ae)})})]}),e.jsx(F.Summary.Row,{children:e.jsx(F.Summary.Cell,{index:0,colSpan:6,children:e.jsxs(N,{italic:!0,children:["Amount in words:"," ","Rupees Only"]})})})]})}})]}),e.jsxs(g,{column:4,bordered:!0,size:"small",style:{marginTop:"20px"},children:[e.jsxs(g.Item,{label:"Sub Total",span:2,children:["₹",((Ie=a.subTotal)==null?void 0:Ie.toFixed(2))||"0.00"]}),a.gstType==="interstate"?e.jsxs(g.Item,{label:"IGST Amount",span:2,children:["₹",((Ne=a.igstAmount)==null?void 0:Ne.toFixed(2))||"0.00"]}):e.jsxs(e.Fragment,{children:[e.jsxs(g.Item,{label:"CGST Amount",span:1,children:["₹",((Se=a.cgstAmount)==null?void 0:Se.toFixed(2))||"0.00"]}),e.jsxs(g.Item,{label:"SGST Amount",span:1,children:["₹",((Te=a.sgstAmount)==null?void 0:Te.toFixed(2))||"0.00"]})]}),e.jsx(g.Item,{label:"Grand Total",span:2,children:e.jsxs(N,{strong:!0,style:{fontSize:"18px",color:"#52c41a"},children:["₹",((Ce=a.totalAmount)==null?void 0:Ce.toFixed(2))||"0.00"]})}),e.jsx(g.Item,{label:"Amount in Words",span:2,children:e.jsx(N,{italic:!0,children:"Rupees Only"})}),e.jsx(g.Item,{label:"Status",span:2,children:be(B[a._id])})]}),((Ae=a.notes)==null?void 0:Ae.length)>0&&e.jsxs(e.Fragment,{children:[e.jsxs(le,{orientation:"left",children:["Notes (",a.notes.length,")"]}),a.notes.map((t,n)=>e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(N,{strong:!0,children:t.author})," on"," ",e.jsx(N,{type:"secondary",children:t.timestamp}),e.jsx("p",{children:t.text})]},n))]})]})}),e.jsx(ie,{title:"Item Specifications",open:l,onCancel:()=>S(!1),footer:e.jsx(v,{onClick:()=>S(!1),children:"Close"}),width:800,children:a&&a.items&&a.items.map((t,n)=>e.jsxs("div",{style:{marginBottom:"20px",border:"1px solid #f0f0f0",padding:"15px",borderRadius:"5px"},children:[e.jsxs(N,{strong:!0,style:{fontSize:"16px",marginBottom:"10px",display:"block"},children:["Item ",n+1,": ",t.productName||t.description||"N/A"]}),e.jsxs(g,{bordered:!0,column:2,size:"small",style:{marginBottom:"15px"},children:[e.jsx(g.Item,{label:"Name",children:t.productName||t.description||"N/A"}),e.jsxs(g.Item,{label:"Price",children:["₹",j(t.rate)]}),e.jsx(g.Item,{label:"Qty",children:t.quantity}),e.jsx(g.Item,{label:"Description",children:t.description||"N/A"})]}),t.specifications&&t.specifications.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(le,{orientation:"left",style:{margin:"15px 0"},children:e.jsx(N,{strong:!0,children:"Product Options"})}),e.jsx(F,{dataSource:t.specifications,columns:[{title:"Type",dataIndex:"name",render:r=>r||"N/A"},{title:"Description",dataIndex:"value",render:r=>r||"N/A"}],pagination:!1,size:"small",rowKey:(r,I)=>`spec-${I}`,bordered:!0})]})]},n))}),a&&e.jsx(dt,{visible:L,onClose:()=>M(!1),invoice:a,refreshInvoices:f}),a&&e.jsx(pt,{visible:u,onClose:()=>A(!1),invoice:a,refreshInvoices:f}),e.jsx(it,{visible:b,onClose:()=>E(!1),invoice:a,refreshInvoices:f})]})},It=Object.freeze(Object.defineProperty({__proto__:null,default:ht},Symbol.toStringTag,{value:"Module"}));export{ht as I,dt as N,It as a};
