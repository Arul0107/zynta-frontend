import{U as p,r as g,x as e,E as u,B as x,V as n}from"./index-Dx0fORvq.js";import{i as h}from"./axios-By3bUnR1.js";import{C as j}from"./index-C1eVaR1v.js";import{F as s}from"./index-BHKMv-_S.js";import{I as c}from"./index-CycGH6gG.js";import"./TextArea-Bqwst6Wg.js";import"./index-CGWGFuT9.js";import"./PlusOutlined-Dt2q3nHd.js";import"./row-D7mQAf0A.js";import"./ExclamationCircleFilled-ctPYYyzk.js";const f="/assets/login-CixHIpi3.png",S=()=>{const r=p(),[o,t]=g.useState(!1),m=async i=>{try{t(!0);const l=await h.post("/api/auth/login",{username:i.email,password:i.password}),{user:a,token:d}=l.data;localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("token",d),localStorage.setItem("token_expiry",Date.now()+2*24*60*60*1e3),n.success(`Welcome ${a.name}!`),["Employee","TeamLead"].includes(a.role)?r("/attendance"):r("/eodreport")}catch{n.error("Invalid credentials")}finally{t(!1)}};return e.jsxs("div",{className:"login-wrapper",children:[e.jsx("div",{className:"login-left",children:e.jsxs(j,{className:"login-card",bordered:!1,children:[e.jsxs("h2",{className:"login-title",children:["Log In ",e.jsx(u,{style:{background:"#0E2B43",color:"white",padding:"20px",borderRadius:"50%"}})]}),e.jsx("p",{className:"login-subtitle",children:"Welcome back! Please enter your details"}),e.jsxs(s,{layout:"vertical",onFinish:m,children:[e.jsx(s.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter your email"}],children:e.jsx(c,{placeholder:"Enter email"})}),e.jsx(s.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please enter your password"}],children:e.jsx(c.Password,{placeholder:"Enter password"})}),e.jsx("div",{className:"forgot-password-wrapper",children:e.jsx("a",{href:"#",className:"forgot-password",children:"Forgot password?"})}),e.jsx(s.Item,{children:e.jsx(x,{type:"primary",htmlType:"submit",block:!0,className:"login-button",loading:o,children:o?"Logging in...":"Log in"})})]})]})}),e.jsx("div",{className:"login-right",children:e.jsx("img",{src:f,alt:"Login visual",className:"loginimg"})})]})};export{S as default};
