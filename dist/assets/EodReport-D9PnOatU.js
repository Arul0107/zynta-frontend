import{P as at,q as s,O as st,s as ae,V as lt}from"./index-Db3Ct3vh.js";import{j,r as D,T as ct,S as Fe,l as Ke,o as ut,B as be,m as ft,n as se,C as V,K as dt,b as ht,M as mt,L as le,d as B,e as ce}from"./antd-CjRtIVzR.js";import{g as pt,i as L,G as yt,a as xe,m as vt,b as H,T as gt,s as Oe,f as X,c as Le,L as Me,d as bt,e as xt,u as Ae,h as Ee,j as Ot,k as wt,l as jt,w as Be,n as Xe,o as pe,p as kt,q as St,r as Pt,B as je,t as _t,R as Tt,v as At}from"./generateCategoricalChart-VjRq7_4Q.js";import{c as ne}from"./tiny-invariant-D6-PeG7m.js";import"./react-DoC2WAmd.js";import"./icons-De3RWgvB.js";import"./defaultLocale-BFAXwUKv.js";function qe(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function Et(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return pt(r,n)}function Ct(e,t,n){var r=n==="width",i=e.x,a=e.y,o=e.width,u=e.height;return t===1?{start:r?i:a,end:r?i+o:a+u}:{start:r?i+o:a+u,end:r?i:a}}function fe(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function $t(e,t){return qe(e,t+1)}function zt(e,t,n,r,i){for(var a=(r||[]).slice(),o=t.start,u=t.end,c=0,h=1,l=o,v=function(){var b=r==null?void 0:r[c];if(b===void 0)return{v:qe(r,h)};var x=c,m,S=function(){return m===void 0&&(m=n(b,x)),m},O=b.coordinate,g=c===0||fe(e,O,S,l,u);g||(c=0,l=o,h+=1),g&&(l=O+e*(S()/2+i),c+=h)},d;h<=a.length;)if(d=v(),d)return d.v;return[]}function ie(e){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(e)}function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ge(Object(n),!0).forEach(function(r){Dt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dt(e,t,n){return t=It(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function It(e){var t=Nt(e,"string");return ie(t)=="symbol"?t:t+""}function Nt(e,t){if(ie(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ie(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rt(e,t,n,r,i){for(var a=(r||[]).slice(),o=a.length,u=t.start,c=t.end,h=function(d){var f=a[d],b,x=function(){return b===void 0&&(b=n(f,d)),b};if(d===o-1){var m=e*(f.coordinate+e*x()/2-c);a[d]=f=A(A({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate})}else a[d]=f=A(A({},f),{},{tickCoord:f.coordinate});var S=fe(e,f.tickCoord,x,u,c);S&&(c=f.tickCoord-e*(x()/2+i),a[d]=A(A({},f),{},{isShow:!0}))},l=o-1;l>=0;l--)h(l);return a}function Ft(e,t,n,r,i,a){var o=(r||[]).slice(),u=o.length,c=t.start,h=t.end;if(a){var l=r[u-1],v=n(l,u-1),d=e*(l.coordinate+e*v/2-h);o[u-1]=l=A(A({},l),{},{tickCoord:d>0?l.coordinate-d*e:l.coordinate});var f=fe(e,l.tickCoord,function(){return v},c,h);f&&(h=l.tickCoord-e*(v/2+i),o[u-1]=A(A({},l),{},{isShow:!0}))}for(var b=a?u-1:u,x=function(O){var g=o[O],k,_=function(){return k===void 0&&(k=n(g,O)),k};if(O===0){var I=e*(g.coordinate-e*_()/2-c);o[O]=g=A(A({},g),{},{tickCoord:I<0?g.coordinate-I*e:g.coordinate})}else o[O]=g=A(A({},g),{},{tickCoord:g.coordinate});var R=fe(e,g.tickCoord,_,c,h);R&&(c=g.tickCoord+e*(_()/2+i),o[O]=A(A({},g),{},{isShow:!0}))},m=0;m<b;m++)x(m);return o}function Ce(e,t,n){var r=e.tick,i=e.ticks,a=e.viewBox,o=e.minTickGap,u=e.orientation,c=e.interval,h=e.tickFormatter,l=e.unit,v=e.angle;if(!i||!i.length||!r)return[];if(L(c)||yt.isSsr)return $t(i,typeof c=="number"&&L(c)?c:0);var d=[],f=u==="top"||u==="bottom"?"width":"height",b=l&&f==="width"?xe(l,{fontSize:t,letterSpacing:n}):{width:0,height:0},x=function(g,k){var _=H(h)?h(g.value,k):g.value;return f==="width"?Et(xe(_,{fontSize:t,letterSpacing:n}),b,v):xe(_,{fontSize:t,letterSpacing:n})[f]},m=i.length>=2?vt(i[1].coordinate-i[0].coordinate):1,S=Ct(a,m,f);return c==="equidistantPreserveStart"?zt(m,S,x,i,o):(c==="preserveStart"||c==="preserveStartEnd"?d=Ft(m,S,x,i,o,c==="preserveStartEnd"):d=Rt(m,S,x,i,o),d.filter(function(O){return O.isShow}))}var Lt=["viewBox"],Mt=["viewBox"],Bt=["ticks"];function U(e){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(e)}function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?We(Object(n),!0).forEach(function(r){$e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function we(e,t){if(e==null)return{};var n=Gt(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Gt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Je(r.key),r)}}function Ht(e,t,n){return t&&He(e.prototype,t),n&&He(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yt(e,t,n){return t=de(t),Vt(e,Ue()?Reflect.construct(t,n||[],de(e).constructor):t.apply(e,n))}function Vt(e,t){if(t&&(U(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kt(e)}function Kt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ue=function(){return!!e})()}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},de(e)}function Xt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}function ke(e,t){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ke(e,t)}function $e(e,t,n){return t=Je(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(e){var t=qt(e,"string");return U(t)=="symbol"?t:t+""}function qt(e,t){if(U(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(U(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Z=function(e){function t(n){var r;return Wt(this,t),r=Yt(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return Xt(t,e),Ht(t,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,o=we(r,Lt),u=this.props,c=u.viewBox,h=we(u,Mt);return!Oe(a,c)||!Oe(o,h)||!Oe(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,o=i.y,u=i.width,c=i.height,h=i.orientation,l=i.tickSize,v=i.mirror,d=i.tickMargin,f,b,x,m,S,O,g=v?-1:1,k=r.tickSize||l,_=L(r.tickCoord)?r.tickCoord:r.coordinate;switch(h){case"top":f=b=r.coordinate,m=o+ +!v*c,x=m-g*k,O=x-g*d,S=_;break;case"left":x=m=r.coordinate,b=a+ +!v*u,f=b-g*k,S=f-g*d,O=_;break;case"right":x=m=r.coordinate,b=a+ +v*u,f=b+g*k,S=f+g*d,O=_;break;default:f=b=r.coordinate,m=o+ +v*c,x=m+g*k,O=x+g*d,S=_;break}return{line:{x1:f,y1:x,x2:b,y2:m},tick:{x:S,y:O}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,u=r.height,c=r.orientation,h=r.mirror,l=r.axisLine,v=z(z(z({},X(this.props,!1)),X(l,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var d=+(c==="top"&&!h||c==="bottom"&&h);v=z(z({},v),{},{x1:i,y1:a+d*u,x2:i+o,y2:a+d*u})}else{var f=+(c==="left"&&!h||c==="right"&&h);v=z(z({},v),{},{x1:i+f*o,y1:a,x2:i+f*o,y2:a+u})}return j.createElement("line",q({},v,{className:ne("recharts-cartesian-axis-line",Le(l,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var o=this,u=this.props,c=u.tickLine,h=u.stroke,l=u.tick,v=u.tickFormatter,d=u.unit,f=Ce(z(z({},this.props),{},{ticks:r}),i,a),b=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),m=X(this.props,!1),S=X(l,!1),O=z(z({},m),{},{fill:"none"},X(c,!1)),g=f.map(function(k,_){var I=o.getTickLineCoord(k),R=I.line,y=I.tick,w=z(z(z(z({textAnchor:b,verticalAnchor:x},m),{},{stroke:"none",fill:h},S),y),{},{index:_,payload:k,visibleTicksCount:f.length,tickFormatter:v});return j.createElement(Me,q({className:"recharts-cartesian-axis-tick",key:"tick-".concat(k.value,"-").concat(k.coordinate,"-").concat(k.tickCoord)},bt(o.props,k,_)),c&&j.createElement("line",q({},O,R,{className:ne("recharts-cartesian-axis-tick-line",Le(c,"className"))})),l&&t.renderTickItem(l,w,"".concat(H(v)?v(k.value,_):k.value).concat(d||"")))});return j.createElement("g",{className:"recharts-cartesian-axis-ticks"},g)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,o=i.width,u=i.height,c=i.ticksGenerator,h=i.className,l=i.hide;if(l)return null;var v=this.props,d=v.ticks,f=we(v,Bt),b=d;return H(c)&&(b=d&&d.length>0?c(this.props):c(f)),o<=0||u<=0||!b||!b.length?null:j.createElement(Me,{className:ne("recharts-cartesian-axis",h),ref:function(m){r.layerReference=m}},a&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),xt.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var o;return j.isValidElement(r)?o=j.cloneElement(r,i):H(r)?o=r(i):o=j.createElement(gt,q({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(D.Component);$e(Z,"displayName","CartesianAxis");$e(Z,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Ut=["x1","y1","x2","y2","key"],Jt=["offset"];function Y(e){"@babel/helpers - typeof";return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(e)}function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ye(Object(n),!0).forEach(function(r){Qt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qt(e,t,n){return t=Zt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e){var t=er(e,"string");return Y(t)=="symbol"?t:t+""}function er(e,t){if(Y(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Y(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}function Ve(e,t){if(e==null)return{};var n=tr(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function tr(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var rr=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,a=t.y,o=t.width,u=t.height,c=t.ry;return j.createElement("rect",{x:i,y:a,ry:c,width:o,height:u,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Qe(e,t){var n;if(j.isValidElement(e))n=j.cloneElement(e,t);else if(H(e))n=e(t);else{var r=t.x1,i=t.y1,a=t.x2,o=t.y2,u=t.key,c=Ve(t,Ut),h=X(c,!1);h.offset;var l=Ve(h,Jt);n=j.createElement("line",W({},l,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:u}))}return n}function nr(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(u,c){var h=E(E({},e),{},{x1:t,y1:u,x2:t+n,y2:u,key:"line-".concat(c),index:c});return Qe(i,h)});return j.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function ir(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,a=e.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(u,c){var h=E(E({},e),{},{x1:u,y1:t,x2:u,y2:t+n,key:"line-".concat(c),index:c});return Qe(i,h)});return j.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function or(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,a=e.width,o=e.height,u=e.horizontalPoints,c=e.horizontal,h=c===void 0?!0:c;if(!h||!t||!t.length)return null;var l=u.map(function(d){return Math.round(d+i-i)}).sort(function(d,f){return d-f});i!==l[0]&&l.unshift(0);var v=l.map(function(d,f){var b=!l[f+1],x=b?i+o-d:l[f+1]-d;if(x<=0)return null;var m=f%t.length;return j.createElement("rect",{key:"react-".concat(f),y:d,x:r,height:x,width:a,stroke:"none",fill:t[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},v)}function ar(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,a=e.x,o=e.y,u=e.width,c=e.height,h=e.verticalPoints;if(!n||!r||!r.length)return null;var l=h.map(function(d){return Math.round(d+a-a)}).sort(function(d,f){return d-f});a!==l[0]&&l.unshift(0);var v=l.map(function(d,f){var b=!l[f+1],x=b?a+u-d:l[f+1]-d;if(x<=0)return null;var m=f%r.length;return j.createElement("rect",{key:"react-".concat(f),x:d,y:o,width:x,height:c,stroke:"none",fill:r[m],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},v)}var sr=function(t,n){var r=t.xAxis,i=t.width,a=t.height,o=t.offset;return Xe(Ce(E(E(E({},Z.defaultProps),r),{},{ticks:pe(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},lr=function(t,n){var r=t.yAxis,i=t.width,a=t.height,o=t.offset;return Xe(Ce(E(E(E({},Z.defaultProps),r),{},{ticks:pe(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},K={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ze(e){var t,n,r,i,a,o,u=Ae(),c=Ee(),h=Ot(),l=E(E({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:K.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:K.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:K.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:K.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:K.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:K.verticalFill,x:L(e.x)?e.x:h.left,y:L(e.y)?e.y:h.top,width:L(e.width)?e.width:h.width,height:L(e.height)?e.height:h.height}),v=l.x,d=l.y,f=l.width,b=l.height,x=l.syncWithTicks,m=l.horizontalValues,S=l.verticalValues,O=wt(),g=jt();if(!L(f)||f<=0||!L(b)||b<=0||!L(v)||v!==+v||!L(d)||d!==+d)return null;var k=l.verticalCoordinatesGenerator||sr,_=l.horizontalCoordinatesGenerator||lr,I=l.horizontalPoints,R=l.verticalPoints;if((!I||!I.length)&&H(_)){var y=m&&m.length,w=_({yAxis:g?E(E({},g),{},{ticks:y?m:g.ticks}):void 0,width:u,height:c,offset:h},y?!0:x);Be(Array.isArray(w),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Y(w),"]")),Array.isArray(w)&&(I=w)}if((!R||!R.length)&&H(k)){var P=S&&S.length,M=k({xAxis:O?E(E({},O),{},{ticks:P?S:O.ticks}):void 0,width:u,height:c,offset:h},P?!0:x);Be(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Y(M),"]")),Array.isArray(M)&&(R=M)}return j.createElement("g",{className:"recharts-cartesian-grid"},j.createElement(rr,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),j.createElement(nr,W({},l,{offset:h,horizontalPoints:I,xAxis:O,yAxis:g})),j.createElement(ir,W({},l,{offset:h,verticalPoints:R,xAxis:O,yAxis:g})),j.createElement(or,W({},l,{horizontalPoints:I})),j.createElement(ar,W({},l,{verticalPoints:R})))}Ze.displayName="CartesianGrid";function J(e){"@babel/helpers - typeof";return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(e)}function cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rt(r.key),r)}}function fr(e,t,n){return t&&ur(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dr(e,t,n){return t=he(t),hr(e,et()?Reflect.construct(t,n||[],he(e).constructor):t.apply(e,n))}function hr(e,t){if(t&&(J(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mr(e)}function mr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(et=function(){return!!e})()}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},he(e)}function pr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}function Se(e,t){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Se(e,t)}function tt(e,t,n){return t=rt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e){var t=yr(e,"string");return J(t)=="symbol"?t:t+""}function yr(e,t){if(J(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(J(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pe.apply(this,arguments)}function vr(e){var t=e.xAxisId,n=Ae(),r=Ee(),i=kt(t);return i==null?null:j.createElement(Z,Pe({},i,{className:ne("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return pe(o,!0)}}))}var ye=function(e){function t(){return cr(this,t),dr(this,t,arguments)}return pr(t,e),fr(t,[{key:"render",value:function(){return j.createElement(vr,this.props)}}])}(j.Component);tt(ye,"displayName","XAxis");tt(ye,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Q(e){"@babel/helpers - typeof";return Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(e)}function gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ot(r.key),r)}}function xr(e,t,n){return t&&br(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Or(e,t,n){return t=me(t),wr(e,nt()?Reflect.construct(t,n||[],me(e).constructor):t.apply(e,n))}function wr(e,t){if(t&&(Q(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jr(e)}function jr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nt=function(){return!!e})()}function me(e){return me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},me(e)}function kr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}function _e(e,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_e(e,t)}function it(e,t,n){return t=ot(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ot(e){var t=Sr(e,"string");return Q(t)=="symbol"?t:t+""}function Sr(e,t){if(Q(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Q(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Te.apply(this,arguments)}var Pr=function(t){var n=t.yAxisId,r=Ae(),i=Ee(),a=St(n);return a==null?null:j.createElement(Z,Te({},a,{className:ne("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(u){return pe(u,!0)}}))},ve=function(e){function t(){return gr(this,t),Or(this,t,arguments)}return kr(t,e),xr(t,[{key:"render",value:function(){return j.createElement(Pr,this.props)}}])}(j.Component);it(ve,"displayName","YAxis");it(ve,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var _r=Pt({chartName:"BarChart",GraphicalChild:je,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ye},{axisType:"yAxis",AxisComp:ve}],formatAxisMap:_t});const{Title:te,Text:re}=ct,{Option:ue}=Ke,{RangePicker:Tr}=ut,Ar=e=>e?B(e).format("DD MMM YYYY, hh:mm A"):"â€”";function Rr(){const[e,t]=D.useState([]),[n,r]=D.useState([]),[i,a]=D.useState(!1),[o,u]=D.useState("today"),[c,h]=D.useState([]),[l,v]=D.useState({total:0,completed:0,pending:0,working:0}),[d,f]=D.useState([]),[b,x]=D.useState(!1),[m,S]=D.useState(null),{presenceMap:O}=D.useContext(at),g=D.useRef({}),k=()=>{const y=B();let w,P;return o==="today"?(w=y.startOf("day").toISOString(),P=y.endOf("day").toISOString()):o==="week"?(w=y.startOf("week").toISOString(),P=y.endOf("week").toISOString()):o==="month"?(w=y.startOf("month").toISOString(),P=y.endOf("month").toISOString()):o==="custom"&&c.length===2&&(w=c[0].startOf("day").toISOString(),P=c[1].endOf("day").toISOString()),{startDate:w,endDate:P}},_=async()=>{var y,w;a(!0);try{if(e.length===0){const p=await ae.get("/api/users");t(p.data||[])}const{startDate:P,endDate:M}=k(),ee=((w=(y=(await ae.get(`/api/work-sessions/range?start=${P}&end=${M}`)).data)==null?void 0:y.history)==null?void 0:w.flatMap(p=>p.sessions))||[],G={};(ee||[]).forEach(p=>{G[p._id]=p}),g.current=G;const N=(e.length?e:(await ae.get("/api/users")).data||[]).flatMap(p=>{var De,Ie;const $=O[p._id],oe=$!=null&&$.lastActiveAt?new Date($.lastActiveAt):p.lastActiveAt?new Date(p.lastActiveAt):null,F=($==null?void 0:$.presence)||p.presence||"offline",ze=ee.filter(T=>String(T.userId)===String(p._id));return ze.length===0?{key:`no-${p._id}`,sessionId:null,userId:p._id,name:p.name,email:p.email,team:((De=p.team)==null?void 0:De.name)||"-",department:((Ie=p.department)==null?void 0:Ie.name)||"-",presence:F,lastSeen:oe,date:"-",loginTimeFormatted:"-",logoutTimeFormatted:"-",workedHours:"0h",eod:"",status:"No Session",accountIds:[],serviceIds:[]}:ze.map(T=>{var Ne,Re;return{key:T._id,sessionId:T._id,userId:p._id,name:p.name,email:p.email,team:((Ne=p.team)==null?void 0:Ne.name)||"-",department:((Re=p.department)==null?void 0:Re.name)||"-",presence:F,lastSeen:oe,date:T.loginTime?B(T.loginTime).format("DD-MM-YYYY"):"-",loginTimeFormatted:T.loginTime?B(T.loginTime).format("hh:mm A"):"-",logoutTimeFormatted:T.logoutTime?B(T.logoutTime).format("hh:mm A"):"-",workedHours:T.totalHours?`${Math.floor(T.totalHours)}h ${Math.floor(T.totalHours*60%60)}m`:"0h",eod:T.eod||"",status:T.logoutTime?T.eod?"Completed":"EOD Pending":"Working",accountIds:T.accountIds||[],serviceIds:T.serviceIds||[]}})});r(N),v({total:N.length,completed:N.filter(p=>p.status==="Completed").length,pending:N.filter(p=>p.status==="EOD Pending").length,working:N.filter(p=>p.status==="Working").length});const C={};(ee||[]).forEach(p=>{const $=B(p.loginTime).format("DD-MM-YYYY");C[$]||(C[$]={date:$,completed:0,pending:0}),p.eod&&p.logoutTime?C[$].completed++:C[$].pending++}),f(Object.values(C))}catch{lt.error("Failed to load report")}finally{a(!1)}},I=async()=>{var y,w;try{const{startDate:P,endDate:M}=k(),ee=((w=(y=(await ae.get(`/api/work-sessions/range?start=${P}&end=${M}`)).data)==null?void 0:y.history)==null?void 0:w.flatMap(N=>N.sessions))||[],G={};ee.forEach(N=>G[N._id]=N),g.current=G,r(N=>N.map(C=>{if(!C.sessionId)return C;const p=G[C.sessionId];return p?{...C,loginTimeFormatted:p.loginTime?B(p.loginTime).format("hh:mm A"):"-",logoutTimeFormatted:p.logoutTime?B(p.logoutTime).format("hh:mm A"):"-",workedHours:p.totalHours?`${Math.floor(p.totalHours)}h ${Math.floor(p.totalHours*60%60)}m`:"0h",eod:p.eod||"",status:p.logoutTime?p.eod?"Completed":"EOD Pending":"Working"}:C})),v(N=>{const C=Object.values(G).map(F=>F.logoutTime?F.eod?"Completed":"EOD Pending":"Working"),p=C.filter(F=>F==="Completed").length,$=C.filter(F=>F==="Working").length,oe=C.filter(F=>F==="EOD Pending").length;return{total:n.length||0,completed:p,pending:oe,working:$}})}catch{}};D.useEffect(()=>{_()},[o]),D.useEffect(()=>{Object.keys(O||{}).length&&r(y=>y.map(w=>{const P=O[w.userId],M=P!=null&&P.lastActiveAt?new Date(P.lastActiveAt):w.lastSeen,ge=(P==null?void 0:P.presence)||w.presence||"offline";return{...w,presence:ge,lastSeen:M}}))},[O]),D.useEffect(()=>{const y=setInterval(()=>{I()},2e4);return()=>clearInterval(y)},[o,c]);const R=[{title:"Date",dataIndex:"date"},{title:"Employee",dataIndex:"name",render:y=>s.jsx("strong",{children:y})},{title:"Email",dataIndex:"email"},{title:"Presence",dataIndex:"presence",render:y=>{const w={online:"green",busy:"red",away:"orange",in_meeting:"purple",offline:"gray"};return s.jsx(ce,{color:w[y],children:(y||"offline").toUpperCase()})}},{title:"Last Seen",dataIndex:"lastSeen",render:(y,w)=>w.presence==="online"?s.jsx(ce,{color:"green",children:"Online now"}):s.jsx("span",{style:{fontSize:12},children:Ar(y)})},{title:"Login",dataIndex:"loginTimeFormatted"},{title:"Logout",dataIndex:"logoutTimeFormatted"},{title:"Worked Hours",dataIndex:"workedHours"},{title:"EOD Message",dataIndex:"eod",render:y=>y?s.jsx("span",{style:{whiteSpace:"pre-wrap"},children:y}):s.jsx(ce,{color:"red",children:"Pending"})},{title:"Status",dataIndex:"status",render:y=>{const w={Working:"blue",Completed:"green","EOD Pending":"orange","No Session":"gray"};return s.jsx(ce,{color:w[y],children:y})}},{title:"Actions",render:(y,w)=>w.status!=="No Session"?s.jsx(be,{type:"link",onClick:()=>{S(w),x(!0)},children:"View EOD"}):null}];return s.jsxs("div",{style:{padding:24},children:[s.jsx(st,{position:"top-right"}),s.jsx(te,{level:2,children:"Employee EOD Report"}),s.jsx(Fe,{align:"center",style:{width:"100%",justifyContent:"space-between",marginBottom:24},children:s.jsxs(Fe,{children:[s.jsxs(Ke,{value:o,onChange:u,style:{width:150},children:[s.jsx(ue,{value:"today",children:"Today"}),s.jsx(ue,{value:"week",children:"This Week"}),s.jsx(ue,{value:"month",children:"This Month"}),s.jsx(ue,{value:"custom",children:"Custom Range"})]}),o==="custom"&&s.jsx(Tr,{onChange:h}),s.jsx(be,{type:"primary",onClick:_,disabled:o==="custom"&&c.length!==2,loading:i,children:"Fetch Data"})]})}),s.jsxs(ft,{gutter:[16,16],children:[s.jsx(se,{xs:24,sm:12,md:6,children:s.jsxs(V,{children:[s.jsx(te,{level:4,children:"Total Records"}),s.jsx(re,{strong:!0,children:l.total})]})}),s.jsx(se,{xs:24,sm:12,md:6,children:s.jsxs(V,{children:[s.jsx(te,{level:4,style:{color:"green"},children:"Completed"}),s.jsx(re,{strong:!0,children:l.completed})]})}),s.jsx(se,{xs:24,sm:12,md:6,children:s.jsxs(V,{children:[s.jsx(te,{level:4,style:{color:"orange"},children:"EOD Pending"}),s.jsx(re,{strong:!0,children:l.pending})]})}),s.jsx(se,{xs:24,sm:12,md:6,children:s.jsxs(V,{children:[s.jsx(te,{level:4,style:{color:"blue"},children:"Currently Working"}),s.jsx(re,{strong:!0,children:l.working})]})})]}),s.jsx(V,{style:{marginTop:24},title:"EOD Completion Trend",children:i?s.jsx("div",{style:{textAlign:"center",padding:50},children:s.jsx(dt,{size:"large"})}):d.length>0?s.jsx(Tt,{width:"100%",height:300,children:s.jsxs(_r,{data:d,children:[s.jsx(Ze,{strokeDasharray:"3 3"}),s.jsx(ye,{dataKey:"date"}),s.jsx(ve,{allowDecimals:!1}),s.jsx(At,{}),s.jsx(je,{dataKey:"completed",name:"Completed"}),s.jsx(je,{dataKey:"pending",name:"Pending"})]})}):s.jsx(re,{type:"secondary",children:"No Data Available"})}),s.jsx(V,{style:{marginTop:24},children:s.jsx(ht,{columns:R,dataSource:n,loading:i,pagination:{pageSize:10},bordered:!0,scroll:{x:1300}})}),s.jsx(mt,{title:`EOD Details - ${m==null?void 0:m.name}`,open:b,onCancel:()=>x(!1),footer:s.jsx(be,{onClick:()=>x(!1),children:"Close"}),width:700,children:m&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Date:"})," ",m.date]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Login:"})," ",m.loginTimeFormatted]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Logout:"})," ",m.logoutTimeFormatted]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Worked Hours:"})," ",m.workedHours]}),s.jsx("p",{children:s.jsx("strong",{children:"EOD Message:"})}),s.jsx("pre",{style:{background:"#f5f5f5",whiteSpace:"pre-wrap",padding:10},children:m.eod||"No EOD submitted"}),s.jsx("p",{children:s.jsx("strong",{children:"Accounts:"})}),s.jsx(le,{size:"small",bordered:!0,dataSource:m.accountIds,renderItem:y=>s.jsx(le.Item,{children:y.businessName||"N/A"})}),s.jsx("p",{children:s.jsx("strong",{children:"Services:"})}),s.jsx(le,{size:"small",bordered:!0,dataSource:m.serviceIds,renderItem:y=>s.jsxs(le.Item,{children:[y.serviceName||"N/A"," (",y.category||"-",")"]})})]})})]})}export{Rr as default};
