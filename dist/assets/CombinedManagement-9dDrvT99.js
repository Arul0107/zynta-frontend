import{r as a,V as n,x as t,S}from"./index-CzhUO-j-.js";import M from"./UserManagement-BE_l9cJy.js";import T from"./DepartmentManagement-Bl-NTw-p.js";import D from"./TeamManagement-CthmSpus.js";import{i as p}from"./axios-By3bUnR1.js";import{T as x}from"./index-CEh5PPkT.js";import"./index-BvPXtaWX.js";import"./TextArea-DXZam5Hb.js";import"./row-OZxQAKlt.js";import"./ExclamationCircleFilled-DJFsQvbq.js";import"./Table-DFMW3Ydh.js";import"./styleChecker-B_q3kf9f.js";import"./addEventListener-CEFnZ_sV.js";import"./index-C8yeWvpE.js";import"./index-B7S4UWYb.js";import"./Pagination-D_gJDmdp.js";import"./extendsObject-78o_rR5W.js";import"./index-DMNwR-Br.js";import"./context-C3C_yqM-.js";import"./useClosable-dDnesZuT.js";import"./index-DhqNJc9P.js";import"./EditOutlined-BMpNAhkC.js";import"./SwapOutlined-CCbKML_w.js";import"./index-DPLXVn8e.js";import"./ActionButton-LNqSuIr7.js";import"./DeleteOutlined-DyhBR_Ce.js";import"./PlusOutlined-DZ7SDzrR.js";import"./Collapse-2yKD5W4p.js";import"./index-lr-WlZcr.js";import"./TeamOutlined-DlxGS_hQ.js";const{TabPane:c}=x,et=()=>{const[l,f]=a.useState([]),[m,j]=a.useState([]),[d,y]=a.useState([]),[b,g]=a.useState(!0),e=JSON.parse(localStorage.getItem("user")),u=(e==null?void 0:e.role)==="Superadmin",h=(e==null?void 0:e.role)==="Admin";e==null||e.role;const r=a.useCallback(async()=>{try{const s=await p.get("/api/users");f(s.data)}catch{n.error("Failed to load users")}},[]),o=a.useCallback(async()=>{try{const s=await p.get("/api/departments");j(s.data)}catch{n.error("Failed to load departments")}},[]),i=a.useCallback(async()=>{try{const s=await p.get("/api/teams");y(s.data)}catch{n.error("Failed to load teams")}},[]);return a.useEffect(()=>{(async()=>{g(!0),await Promise.all([r(),o(),i()]),g(!1)})()},[r,o,i]),b?t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:t.jsx(S,{size:"large"})}):t.jsxs("div",{style:{padding:"20px"},children:[t.jsx("h1",{children:"Management Dashboard"}),t.jsxs(x,{defaultActiveKey:"users",type:"card",children:[t.jsx(c,{tab:"User Management",children:t.jsx(M,{users:l,departments:m,teams:d,fetchUsers:r,fetchDepartments:o,fetchTeams:i})},"users"),(u||h)&&t.jsx(c,{tab:"Department Management",children:t.jsx(T,{departments:m,fetchDepartments:o,fetchTeams:i,fetchUsers:r})},"departments"),(u||h)&&t.jsx(c,{tab:"Team Management",children:t.jsx(D,{teams:d,departments:m,allUsers:l,fetchTeams:i,fetchDepartments:o,fetchUsers:r})},"teams")]})]})};export{et as default};
