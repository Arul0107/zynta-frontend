import{I as j,u as v,q as e,s as c}from"./index-Db3Ct3vh.js";import{r as n,B as r,q as h,b as _,s as l,x as S,y as W,P as $,a as C}from"./antd-CjRtIVzR.js";import"./react-DoC2WAmd.js";import"./icons-De3RWgvB.js";function F(){const{service_id:t}=j(),a=v(),[m,k]=n.useState([]),[x,d]=n.useState("Loading..."),[u,w]=n.useState(!0),g=async()=>{try{const o=(await c.get("/api/service")).data.find(i=>i._id===t||i.service_id===t);d((o==null?void 0:o.serviceName)||"Unknown Service")}catch{d("Unknown Service")}},f=async()=>{var s;w(!0);try{const o=await c.get(`/api/workflow/${t}`);k(((s=o.data)==null?void 0:s.workflows)||[])}catch{l.error("Failed to load workflows")}w(!1)};n.useEffect(()=>{g(),f()},[t]);const p=async s=>{try{await c.delete(`/api/workflow/${s}`),l.success("Workflow deleted"),f()}catch{l.error("Failed to delete workflow")}},y=[{title:"S.No",render:(s,o,i)=>i+1},{title:"Workflow Name",dataIndex:"workflowName"},{title:"Actions",render:(s,o)=>e.jsxs(e.Fragment,{children:[e.jsx(r,{icon:e.jsx(S,{}),size:"small",onClick:()=>a(`/workflow/view/${o._id}`),children:"View"}),e.jsx(r,{icon:e.jsx(W,{}),size:"small",style:{marginLeft:6},onClick:()=>a(`/workflow/edit/${o._id}`),children:"Edit"}),e.jsx($,{title:"Delete workflow?",onConfirm:()=>p(o._id),children:e.jsx(r,{icon:e.jsx(C,{}),danger:!0,size:"small",style:{marginLeft:6}})})]})}];return e.jsxs("div",{style:{padding:20},children:[e.jsxs("h2",{children:[x," Workflows"]}),e.jsx(r,{type:"primary",icon:e.jsx(h,{}),style:{background:"#0E2B43",borderColor:"#0E2B43",marginBottom:15},onClick:()=>a(`/workflow/${t}/create`),children:"Create Workflow"}),e.jsx(_,{rowKey:"_id",loading:u,columns:y,dataSource:m}),e.jsx(r,{type:"link",style:{marginTop:15},onClick:()=>a("/service-management"),children:"â† Back"})]})}export{F as default};
