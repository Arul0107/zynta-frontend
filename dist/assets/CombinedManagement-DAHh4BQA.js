import{s as m,V as c,q as e}from"./index-Db3Ct3vh.js";import{r as t,K as S,v as x}from"./antd-CjRtIVzR.js";import M from"./UserManagement-7MPzy6cR.js";import D from"./DepartmentManagement-BxIDu8Ce.js";import T from"./TeamManagement-BSuqYgYz.js";import"./react-DoC2WAmd.js";import"./icons-De3RWgvB.js";const{TabPane:l}=x,I=()=>{const[d,f]=t.useState([]),[i,j]=t.useState([]),[p,y]=t.useState([]),[b,g]=t.useState(!0),a=JSON.parse(localStorage.getItem("user")),u=(a==null?void 0:a.role)==="Superadmin",h=(a==null?void 0:a.role)==="Admin";a==null||a.role;const n=t.useCallback(async()=>{try{const s=await m.get("/api/users");f(s.data)}catch{c.error("Failed to load users")}},[]),r=t.useCallback(async()=>{try{const s=await m.get("/api/departments");j(s.data)}catch{c.error("Failed to load departments")}},[]),o=t.useCallback(async()=>{try{const s=await m.get("/api/teams");y(s.data)}catch{c.error("Failed to load teams")}},[]);return t.useEffect(()=>{(async()=>{g(!0),await Promise.all([n(),r(),o()]),g(!1)})()},[n,r,o]),b?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(S,{size:"large"})}):e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("h1",{children:"Management Dashboard"}),e.jsxs(x,{defaultActiveKey:"users",type:"card",children:[e.jsx(l,{tab:"User Management",children:e.jsx(M,{users:d,departments:i,teams:p,fetchUsers:n,fetchDepartments:r,fetchTeams:o})},"users"),(u||h)&&e.jsx(l,{tab:"Department Management",children:e.jsx(D,{departments:i,fetchDepartments:r,fetchTeams:o,fetchUsers:n})},"departments"),(u||h)&&e.jsx(l,{tab:"Team Management",children:e.jsx(T,{teams:p,departments:i,allUsers:d,fetchTeams:o,fetchDepartments:r,fetchUsers:n})},"teams")]})]})};export{I as default};
