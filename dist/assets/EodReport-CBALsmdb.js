import{R as P,r as E,x as y,O as Wt,y as xt,B as Vt,S as Ht,V as Yt}from"./index-DysXtrl7.js";import{i as wt}from"./axios-Dbq_CbWC.js";import{d as U}from"./dayjs.min-DoBvc7g8.js";import{T as Kt}from"./index-PWcPX8J0.js";import{S as Et}from"./index-qBajPA1p.js";import{R as Xt,C as J}from"./row-BYIzmBXD.js";import{C as N}from"./index-IahplJ7o.js";import{g as qt,i as A,G as Ut,a as ot,m as Jt,b as $,T as Qt,s as at,f as I,c as Ot,L as jt,d as Zt,e as te,u as pt,h as vt,j as ee,k as re,l as ie,w as Pt,n as Ct,o as rt,p as ne,q as oe,r as ae,B as st,t as le,R as ce,v as se}from"./generateCategoricalChart-B71JAKPp.js";import{c as K}from"./clsx-B-dksMZM.js";import{F as ue}from"./Table-DflE-h7Z.js";import{T as V}from"./index-BBTWRX9T.js";import"./EditOutlined-C9Bhlaw5.js";import"./styleChecker-w1bbWMN2.js";import"./TextArea-Bqbh4RKI.js";import"./index-CL3JxQbZ.js";import"./PlusOutlined-BIwFneT8.js";import"./rgb-CRqGqeL1.js";import"./addEventListener-D04I5D8z.js";import"./index-BrgBQ01W.js";import"./Pagination-ByOtUXMd.js";import"./extendsObject-78o_rR5W.js";import"./useClosable-DxUighul.js";function $t(t,e,i){if(e<1)return[];if(e===1&&i===void 0)return t;for(var r=[],n=0;n<t.length;n+=e)r.push(t[n]);return r}function fe(t,e,i){var r={width:t.width+e.width,height:t.height+e.height};return qt(r,i)}function he(t,e,i){var r=i==="width",n=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:r?n:o,end:r?n+a:o+s}:{start:r?n+a:o+s,end:r?n:o}}function Q(t,e,i,r,n){if(t*e<t*r||t*e>t*n)return!1;var o=i();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-n)<=0}function de(t,e){return $t(t,e+1)}function ye(t,e,i,r,n){for(var o=(r||[]).slice(),a=e.start,s=e.end,c=0,d=1,l=a,g=function(){var x=r==null?void 0:r[c];if(x===void 0)return{v:$t(r,d)};var w=c,h,v=function(){return h===void 0&&(h=i(x,w)),h},m=x.coordinate,p=c===0||Q(t,m,v,l,s);p||(c=0,l=a,d+=1),p&&(l=m+t*(v()/2+n),c+=d)},f;d<=o.length;)if(f=g(),f)return f.v;return[]}function X(t){"@babel/helpers - typeof";return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(t)}function kt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function _(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?kt(Object(i),!0).forEach(function(r){pe(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):kt(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function pe(t,e,i){return e=ve(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ve(t){var e=me(t,"string");return X(e)=="symbol"?e:e+""}function me(t,e){if(X(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(X(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ge(t,e,i,r,n){for(var o=(r||[]).slice(),a=o.length,s=e.start,c=e.end,d=function(f){var u=o[f],x,w=function(){return x===void 0&&(x=i(u,f)),x};if(f===a-1){var h=t*(u.coordinate+t*w()/2-c);o[f]=u=_(_({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate})}else o[f]=u=_(_({},u),{},{tickCoord:u.coordinate});var v=Q(t,u.tickCoord,w,s,c);v&&(c=u.tickCoord-t*(w()/2+n),o[f]=_(_({},u),{},{isShow:!0}))},l=a-1;l>=0;l--)d(l);return o}function be(t,e,i,r,n,o){var a=(r||[]).slice(),s=a.length,c=e.start,d=e.end;if(o){var l=r[s-1],g=i(l,s-1),f=t*(l.coordinate+t*g/2-d);a[s-1]=l=_(_({},l),{},{tickCoord:f>0?l.coordinate-f*t:l.coordinate});var u=Q(t,l.tickCoord,function(){return g},c,d);u&&(d=l.tickCoord-t*(g/2+n),a[s-1]=_(_({},l),{},{isShow:!0}))}for(var x=o?s-1:s,w=function(m){var p=a[m],b,j=function(){return b===void 0&&(b=i(p,m)),b};if(m===0){var O=t*(p.coordinate-t*j()/2-c);a[m]=p=_(_({},p),{},{tickCoord:O<0?p.coordinate-O*t:p.coordinate})}else a[m]=p=_(_({},p),{},{tickCoord:p.coordinate});var k=Q(t,p.tickCoord,j,c,d);k&&(c=p.tickCoord+t*(j()/2+n),a[m]=_(_({},p),{},{isShow:!0}))},h=0;h<x;h++)w(h);return a}function mt(t,e,i){var r=t.tick,n=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,c=t.interval,d=t.tickFormatter,l=t.unit,g=t.angle;if(!n||!n.length||!r)return[];if(A(c)||Ut.isSsr)return de(n,typeof c=="number"&&A(c)?c:0);var f=[],u=s==="top"||s==="bottom"?"width":"height",x=l&&u==="width"?ot(l,{fontSize:e,letterSpacing:i}):{width:0,height:0},w=function(p,b){var j=$(d)?d(p.value,b):p.value;return u==="width"?fe(ot(j,{fontSize:e,letterSpacing:i}),x,g):ot(j,{fontSize:e,letterSpacing:i})[u]},h=n.length>=2?Jt(n[1].coordinate-n[0].coordinate):1,v=he(o,h,u);return c==="equidistantPreserveStart"?ye(h,v,w,n,a):(c==="preserveStart"||c==="preserveStartEnd"?f=be(h,v,w,n,a,c==="preserveStartEnd"):f=ge(h,v,w,n,a),f.filter(function(m){return m.isShow}))}var xe=["viewBox"],we=["viewBox"],Oe=["ticks"];function L(t){"@babel/helpers - typeof";return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(t)}function B(){return B=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},B.apply(this,arguments)}function _t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function T(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?_t(Object(i),!0).forEach(function(r){gt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_t(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function lt(t,e){if(t==null)return{};var i=je(t,e),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function je(t,e){if(t==null)return{};var i={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;i[r]=t[r]}return i}function Pe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function St(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dt(r.key),r)}}function ke(t,e,i){return e&&St(t.prototype,e),i&&St(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _e(t,e,i){return e=Z(e),Se(t,zt()?Reflect.construct(e,i||[],Z(t).constructor):e.apply(t,i))}function Se(t,e){if(e&&(L(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Te(t)}function Te(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zt=function(){return!!t})()}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Z(t)}function Ae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ut(t,e)}function ut(t,e){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},ut(t,e)}function gt(t,e,i){return e=Dt(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Dt(t){var e=Ee(t,"string");return L(e)=="symbol"?e:e+""}function Ee(t,e){if(L(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var M=function(t){function e(i){var r;return Pe(this,e),r=_e(this,e,[i]),r.state={fontSize:"",letterSpacing:""},r}return Ae(e,t),ke(e,[{key:"shouldComponentUpdate",value:function(r,n){var o=r.viewBox,a=lt(r,xe),s=this.props,c=s.viewBox,d=lt(s,we);return!at(o,c)||!at(a,d)||!at(n,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var n=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];n&&this.setState({fontSize:window.getComputedStyle(n).fontSize,letterSpacing:window.getComputedStyle(n).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var n=this.props,o=n.x,a=n.y,s=n.width,c=n.height,d=n.orientation,l=n.tickSize,g=n.mirror,f=n.tickMargin,u,x,w,h,v,m,p=g?-1:1,b=r.tickSize||l,j=A(r.tickCoord)?r.tickCoord:r.coordinate;switch(d){case"top":u=x=r.coordinate,h=a+ +!g*c,w=h-p*b,m=w-p*f,v=j;break;case"left":w=h=r.coordinate,x=o+ +!g*s,u=x-p*b,v=u-p*f,m=j;break;case"right":w=h=r.coordinate,x=o+ +g*s,u=x+p*b,v=u+p*f,m=j;break;default:u=x=r.coordinate,h=a+ +g*c,w=h+p*b,m=w+p*f,v=j;break}return{line:{x1:u,y1:w,x2:x,y2:h},tick:{x:v,y:m}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,n=r.orientation,o=r.mirror,a;switch(n){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,n=r.orientation,o=r.mirror,a="end";switch(n){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,n=r.x,o=r.y,a=r.width,s=r.height,c=r.orientation,d=r.mirror,l=r.axisLine,g=T(T(T({},I(this.props,!1)),I(l,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!d||c==="bottom"&&d);g=T(T({},g),{},{x1:n,y1:o+f*s,x2:n+a,y2:o+f*s})}else{var u=+(c==="left"&&!d||c==="right"&&d);g=T(T({},g),{},{x1:n+u*a,y1:o,x2:n+u*a,y2:o+s})}return P.createElement("line",B({},g,{className:K("recharts-cartesian-axis-line",Ot(l,"className"))}))}},{key:"renderTicks",value:function(r,n,o){var a=this,s=this.props,c=s.tickLine,d=s.stroke,l=s.tick,g=s.tickFormatter,f=s.unit,u=mt(T(T({},this.props),{},{ticks:r}),n,o),x=this.getTickTextAnchor(),w=this.getTickVerticalAnchor(),h=I(this.props,!1),v=I(l,!1),m=T(T({},h),{},{fill:"none"},I(c,!1)),p=u.map(function(b,j){var O=a.getTickLineCoord(b),k=O.line,W=O.tick,D=T(T(T(T({textAnchor:x,verticalAnchor:w},h),{},{stroke:"none",fill:d},v),W),{},{index:j,payload:b,visibleTicksCount:u.length,tickFormatter:g});return P.createElement(jt,B({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},Zt(a.props,b,j)),c&&P.createElement("line",B({},m,k,{className:K("recharts-cartesian-axis-tick-line",Ot(c,"className"))})),l&&e.renderTickItem(l,D,"".concat($(g)?g(b.value,j):b.value).concat(f||"")))});return P.createElement("g",{className:"recharts-cartesian-axis-ticks"},p)}},{key:"render",value:function(){var r=this,n=this.props,o=n.axisLine,a=n.width,s=n.height,c=n.ticksGenerator,d=n.className,l=n.hide;if(l)return null;var g=this.props,f=g.ticks,u=lt(g,Oe),x=f;return $(c)&&(x=f&&f.length>0?c(this.props):c(u)),a<=0||s<=0||!x||!x.length?null:P.createElement(jt,{className:K("recharts-cartesian-axis",d),ref:function(h){r.layerReference=h}},o&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),te.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,n,o){var a;return P.isValidElement(r)?a=P.cloneElement(r,n):$(r)?a=r(n):a=P.createElement(Qt,B({},n,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(E.Component);gt(M,"displayName","CartesianAxis");gt(M,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Ce=["x1","y1","x2","y2","key"],$e=["offset"];function z(t){"@babel/helpers - typeof";return z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(t)}function Tt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function S(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Tt(Object(i),!0).forEach(function(r){ze(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Tt(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function ze(t,e,i){return e=De(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function De(t){var e=Ne(t,"string");return z(e)=="symbol"?e:e+""}function Ne(t,e){if(z(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(z(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function C(){return C=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},C.apply(this,arguments)}function At(t,e){if(t==null)return{};var i=Fe(t,e),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Fe(t,e){if(t==null)return{};var i={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;i[r]=t[r]}return i}var Ie=function(e){var i=e.fill;if(!i||i==="none")return null;var r=e.fillOpacity,n=e.x,o=e.y,a=e.width,s=e.height,c=e.ry;return P.createElement("rect",{x:n,y:o,ry:c,width:a,height:s,stroke:"none",fill:i,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Nt(t,e){var i;if(P.isValidElement(t))i=P.cloneElement(t,e);else if($(t))i=t(e);else{var r=e.x1,n=e.y1,o=e.x2,a=e.y2,s=e.key,c=At(e,Ce),d=I(c,!1);d.offset;var l=At(d,$e);i=P.createElement("line",C({},l,{x1:r,y1:n,x2:o,y2:a,fill:"none",key:s}))}return i}function Be(t){var e=t.x,i=t.width,r=t.horizontal,n=r===void 0?!0:r,o=t.horizontalPoints;if(!n||!o||!o.length)return null;var a=o.map(function(s,c){var d=S(S({},t),{},{x1:e,y1:s,x2:e+i,y2:s,key:"line-".concat(c),index:c});return Nt(n,d)});return P.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function Le(t){var e=t.y,i=t.height,r=t.vertical,n=r===void 0?!0:r,o=t.verticalPoints;if(!n||!o||!o.length)return null;var a=o.map(function(s,c){var d=S(S({},t),{},{x1:s,y1:e,x2:s,y2:e+i,key:"line-".concat(c),index:c});return Nt(n,d)});return P.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function Re(t){var e=t.horizontalFill,i=t.fillOpacity,r=t.x,n=t.y,o=t.width,a=t.height,s=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!e||!e.length)return null;var l=s.map(function(f){return Math.round(f+n-n)}).sort(function(f,u){return f-u});n!==l[0]&&l.unshift(0);var g=l.map(function(f,u){var x=!l[u+1],w=x?n+a-f:l[u+1]-f;if(w<=0)return null;var h=u%e.length;return P.createElement("rect",{key:"react-".concat(u),y:f,x:r,height:w,width:o,stroke:"none",fill:e[h],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},g)}function Ge(t){var e=t.vertical,i=e===void 0?!0:e,r=t.verticalFill,n=t.fillOpacity,o=t.x,a=t.y,s=t.width,c=t.height,d=t.verticalPoints;if(!i||!r||!r.length)return null;var l=d.map(function(f){return Math.round(f+o-o)}).sort(function(f,u){return f-u});o!==l[0]&&l.unshift(0);var g=l.map(function(f,u){var x=!l[u+1],w=x?o+s-f:l[u+1]-f;if(w<=0)return null;var h=u%r.length;return P.createElement("rect",{key:"react-".concat(u),x:f,y:a,width:w,height:c,stroke:"none",fill:r[h],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},g)}var Me=function(e,i){var r=e.xAxis,n=e.width,o=e.height,a=e.offset;return Ct(mt(S(S(S({},M.defaultProps),r),{},{ticks:rt(r,!0),viewBox:{x:0,y:0,width:n,height:o}})),a.left,a.left+a.width,i)},We=function(e,i){var r=e.yAxis,n=e.width,o=e.height,a=e.offset;return Ct(mt(S(S(S({},M.defaultProps),r),{},{ticks:rt(r,!0),viewBox:{x:0,y:0,width:n,height:o}})),a.top,a.top+a.height,i)},F={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ft(t){var e,i,r,n,o,a,s=pt(),c=vt(),d=ee(),l=S(S({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:F.stroke,fill:(i=t.fill)!==null&&i!==void 0?i:F.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:F.horizontal,horizontalFill:(n=t.horizontalFill)!==null&&n!==void 0?n:F.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:F.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:F.verticalFill,x:A(t.x)?t.x:d.left,y:A(t.y)?t.y:d.top,width:A(t.width)?t.width:d.width,height:A(t.height)?t.height:d.height}),g=l.x,f=l.y,u=l.width,x=l.height,w=l.syncWithTicks,h=l.horizontalValues,v=l.verticalValues,m=re(),p=ie();if(!A(u)||u<=0||!A(x)||x<=0||!A(g)||g!==+g||!A(f)||f!==+f)return null;var b=l.verticalCoordinatesGenerator||Me,j=l.horizontalCoordinatesGenerator||We,O=l.horizontalPoints,k=l.verticalPoints;if((!O||!O.length)&&$(j)){var W=h&&h.length,D=j({yAxis:p?S(S({},p),{},{ticks:W?h:p.ticks}):void 0,width:s,height:c,offset:d},W?!0:w);Pt(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(z(D),"]")),Array.isArray(D)&&(O=D)}if((!k||!k.length)&&$(b)){var bt=v&&v.length,q=b({xAxis:m?S(S({},m),{},{ticks:bt?v:m.ticks}):void 0,width:s,height:c,offset:d},bt?!0:w);Pt(Array.isArray(q),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(z(q),"]")),Array.isArray(q)&&(k=q)}return P.createElement("g",{className:"recharts-cartesian-grid"},P.createElement(Ie,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),P.createElement(Be,C({},l,{offset:d,horizontalPoints:O,xAxis:m,yAxis:p})),P.createElement(Le,C({},l,{offset:d,verticalPoints:k,xAxis:m,yAxis:p})),P.createElement(Re,C({},l,{horizontalPoints:O})),P.createElement(Ge,C({},l,{verticalPoints:k})))}Ft.displayName="CartesianGrid";function R(t){"@babel/helpers - typeof";return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(t)}function Ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function He(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lt(r.key),r)}}function Ye(t,e,i){return e&&He(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ke(t,e,i){return e=tt(e),Xe(t,It()?Reflect.construct(e,i||[],tt(t).constructor):e.apply(t,i))}function Xe(t,e){if(e&&(R(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qe(t)}function qe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function It(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(It=function(){return!!t})()}function tt(t){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},tt(t)}function Ue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ft(t,e)}function ft(t,e){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},ft(t,e)}function Bt(t,e,i){return e=Lt(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Lt(t){var e=Je(t,"string");return R(e)=="symbol"?e:e+""}function Je(t,e){if(R(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(R(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ht(){return ht=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},ht.apply(this,arguments)}function Qe(t){var e=t.xAxisId,i=pt(),r=vt(),n=ne(e);return n==null?null:P.createElement(M,ht({},n,{className:K("recharts-".concat(n.axisType," ").concat(n.axisType),n.className),viewBox:{x:0,y:0,width:i,height:r},ticksGenerator:function(a){return rt(a,!0)}}))}var it=function(t){function e(){return Ve(this,e),Ke(this,e,arguments)}return Ue(e,t),Ye(e,[{key:"render",value:function(){return P.createElement(Qe,this.props)}}])}(P.Component);Bt(it,"displayName","XAxis");Bt(it,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function G(t){"@babel/helpers - typeof";return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(t)}function Ze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mt(r.key),r)}}function er(t,e,i){return e&&tr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rr(t,e,i){return e=et(e),ir(t,Rt()?Reflect.construct(e,i||[],et(t).constructor):e.apply(t,i))}function ir(t,e){if(e&&(G(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nr(t)}function nr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rt=function(){return!!t})()}function et(t){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},et(t)}function or(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dt(t,e)}function dt(t,e){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},dt(t,e)}function Gt(t,e,i){return e=Mt(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Mt(t){var e=ar(t,"string");return G(e)=="symbol"?e:e+""}function ar(t,e){if(G(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(G(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function yt(){return yt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},yt.apply(this,arguments)}var lr=function(e){var i=e.yAxisId,r=pt(),n=vt(),o=oe(i);return o==null?null:P.createElement(M,yt({},o,{className:K("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return rt(s,!0)}}))},nt=function(t){function e(){return Ze(this,e),rr(this,e,arguments)}return or(e,t),er(e,[{key:"render",value:function(){return P.createElement(lr,this.props)}}])}(P.Component);Gt(nt,"displayName","YAxis");Gt(nt,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var cr=ae({chartName:"BarChart",GraphicalChild:st,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:it},{axisType:"yAxis",AxisComp:nt}],formatAxisMap:le});const{Title:H,Text:Y}=Kt,{Option:ct}=Et;function Cr(){const[t,e]=E.useState([]),[i,r]=E.useState([]),[n,o]=E.useState(!1),[a,s]=E.useState("today"),[c,d]=E.useState({total:0,completed:0,pending:0,working:0}),[l,g]=E.useState([]),f=async()=>{o(!0);try{const h=await wt.get("/api/users"),v=Array.isArray(h.data)?h.data:[];e(v);const m=await wt.get("/api/work-sessions/today"),p=Array.isArray(m.data.sessions)?m.data.sessions:[],b=v.map(j=>{const O=p.find(k=>k.userId===j._id);return{key:j._id,...j,session:O,loginTimeFormatted:O!=null&&O.loginTime?U(O.loginTime).format("hh:mm A"):"-",logoutTimeFormatted:O!=null&&O.logoutTime?U(O.logoutTime).format("hh:mm A"):"-",workedHours:O!=null&&O.totalHours?`${Math.floor(O.totalHours)}h ${Math.floor(O.totalHours*60%60)}m`:"0h"}});r(b),u(b),x(b)}catch(h){console.error(h),Yt.error("Failed to load EOD report")}finally{o(!1)}},u=h=>{const v=h.length,m=h.filter(j=>{var O,k;return((O=j.session)==null?void 0:O.eod)&&((k=j.session)==null?void 0:k.logoutTime)}).length,p=h.filter(j=>j.session&&!j.session.logoutTime).length,b=v-m-p;d({total:v,completed:m,pending:b,working:p})},x=h=>{const v={};h.forEach(p=>{var j,O,k;const b=U(((j=p.session)==null?void 0:j.loginTime)||p.createdAt).format("YYYY-MM-DD");v[b]||(v[b]={date:b,completed:0,pending:0}),(O=p.session)!=null&&O.eod&&((k=p.session)!=null&&k.logoutTime)?v[b].completed++:v[b].pending++});const m=Object.values(v).sort((p,b)=>new Date(p.date)-new Date(b.date));g(m)};E.useEffect(()=>{f()},[a]);const w=[{title:"Employee",dataIndex:"name",key:"name",render:h=>y.jsx("strong",{children:h})},{title:"Login Time",dataIndex:"loginTimeFormatted"},{title:"Logout Time",dataIndex:"logoutTimeFormatted"},{title:"Worked Hours",dataIndex:"workedHours"},{title:"EOD Message",render:(h,v)=>{var m;return(m=v.session)!=null&&m.eod?y.jsx("span",{style:{whiteSpace:"pre-wrap"},children:v.session.eod}):y.jsx(V,{color:"red",children:"Pending"})}},{title:"Status",render:(h,v)=>v.session?v.session.logoutTime?v.session.eod&&v.session.totalHours>0?y.jsx(V,{color:"green",children:"Completed"}):y.jsx(V,{color:"orange",children:"EOD Pending"}):y.jsx(V,{color:"blue",children:"Working"}):y.jsx(V,{color:"grey",children:"Not Started"})}];return y.jsxs("div",{style:{padding:24},children:[y.jsx(Wt,{position:"top-right"}),y.jsxs(xt,{align:"center",style:{width:"100%",justifyContent:"space-between",marginBottom:24},children:[y.jsx(H,{level:2,children:"Employee EOD Report"}),y.jsxs(xt,{children:[y.jsxs(Et,{value:a,onChange:s,style:{width:150},children:[y.jsx(ct,{value:"today",children:"Today"}),y.jsx(ct,{value:"week",children:"This Week"}),y.jsx(ct,{value:"month",children:"This Month"})]}),y.jsx(Vt,{onClick:f,loading:n,children:"Refresh"})]})]}),y.jsxs(Xt,{gutter:[16,16],children:[y.jsx(J,{xs:24,sm:12,md:6,children:y.jsxs(N,{bordered:!0,children:[y.jsx(H,{level:4,children:"Total Employees"}),y.jsx(Y,{strong:!0,children:c.total})]})}),y.jsx(J,{xs:24,sm:12,md:6,children:y.jsxs(N,{bordered:!0,children:[y.jsx(H,{level:4,style:{color:"green"},children:"Completed EOD"}),y.jsx(Y,{strong:!0,children:c.completed})]})}),y.jsx(J,{xs:24,sm:12,md:6,children:y.jsxs(N,{bordered:!0,children:[y.jsx(H,{level:4,style:{color:"orange"},children:"EOD Pending"}),y.jsx(Y,{strong:!0,children:c.pending})]})}),y.jsx(J,{xs:24,sm:12,md:6,children:y.jsxs(N,{bordered:!0,children:[y.jsx(H,{level:4,style:{color:"blue"},children:"Currently Working"}),y.jsx(Y,{strong:!0,children:c.working})]})})]}),y.jsx(N,{style:{marginTop:24},title:"EOD Completion Trend",children:n?y.jsx("div",{style:{textAlign:"center",padding:50},children:y.jsx(Ht,{size:"large"})}):l.length>0?y.jsx(ce,{width:"100%",height:300,children:y.jsxs(cr,{data:l,children:[y.jsx(Ft,{strokeDasharray:"3 3"}),y.jsx(it,{dataKey:"date",tickFormatter:h=>U(h).format("DD MMM")}),y.jsx(nt,{allowDecimals:!1}),y.jsx(se,{}),y.jsx(st,{dataKey:"completed",fill:"#4CAF50",name:"Completed"}),y.jsx(st,{dataKey:"pending",fill:"#FF9800",name:"Pending"})]})}):y.jsx(Y,{type:"secondary",children:"No data available for this period"})}),y.jsx(N,{style:{marginTop:24},children:y.jsx(ue,{columns:w,dataSource:i,loading:n,pagination:{pageSize:10},bordered:!0,scroll:{x:800}})})]})}export{Cr as default};
